import { Start as f_ } from "./WebSharper.Core.JavaScript/Runtime.js"
import { MarkResizable as f$, SetOptional as ga, Lazy as gb, GetOptional as gc, CreateFuncWithArgs as gd, DeleteEmptyFields as ge, Create as gf, OnLoad as gg } from "./WebSharper.Core.JavaScript/Runtime.js"
function a(gh){ return"Dispose"in gh;}
function b(){ let gh;const gi=new k();const gj=bM.Convert((gA) => { const gB=new t("New_1");const gC=(gB.h.push(new U("stockname", gA[0])),gB);const gD=(gC.h.push(new U("stockamount", String(gA[1]))),gC);const gE=M(gD.k, gD.h, []);const gF=new o(gE[1], I(gE[0]));let gG=(gD.i=gF,gF);return gG.Doc;}, i().v);const gk=(gh=h().Get(),String(gh));const gl=bM.Convert((gA) => { let gB;const gC=gA[0];const gD=(gB=(g().Find((gL) => gL[0]==gC))[1],String(gB));const gE=new t("New_1");const gF=(gE.h.push(new U("stockname", gC)),gE);const gG=(gF.h.push(new U("stockprice", String(gA[1]))),gF);const gH=(gG.h.push(new U("pricepercentage", gD)),gG);const gI=M(gH.k, gH.h, []);const gJ=new o(gI[1], H(gI[0]));let gK=(gH.i=gJ,gJ);return gK.Doc;}, f().v);const gm=new t("New_1");const gn=(gm.h.push(new R("stockpricecontainer", gl)),gm);const go=(gn.h.push(new Q("moneyowned", S.Create_1(gk))),gn);const gp=(go.h.push(new R("stockcontainer", gj)),go);const gq=(gp.h.push(L(gp.k, "nextdaybutton", () => gp.i, () => { const gA=gi.Next(0, 2)*2-1;const gB=[(f().Find((gC) => gC[0]=="NASDAQ"))[1], (f().Find((gC) => gC[0]=="RUSSEL"))[1], (f().Find((gC) => gC[0]=="IBEX"))[1], (f().Find((gC) => gC[0]=="NIKKEI"))[1]];g().Clear();g().AppendMany(f());f().Clear();f().AppendMany([["NASDAQ", p(gB, 0)+gA*gi.Next(0, 1000)], ["RUSSEL", p(gB, 1)+gA*gi.Next(0, 300)], ["IBEX", p(gB, 2)+gA*gi.Next(0, 600)], ["NIKKEI", p(gB, 3)+gA*gi.Next(0, 1500)]]);})),gp);const gr=(gq.h.push(new Q("selectedstock", e())),gq);const gs=(gr.h.push(new O("inputbuy", d())),gr);const gt=(gs.h.push(new O("inputsell", c())),gs);const gu=(gt.h.push(L(gt.k, "buybutton", () => gt.i, (gA) => { let gB;const gC=(i().Find((gH) => gH[0]==e().Get()))[1];const gD=(f().Find((gH) => gH[0]==e().Get()))[1];const gE=h().Get();const gF=d().Get();if(gF>=0){ const gG=gF*gD;if(gE>=gG){ h().Set(gE-gG);i().Append([e().Get(), gC+d().Get()]);} else h().Set(gE);} else h().Set(gE);u.Value(gA.Vars.Hole("moneyowned")).Set((gB=h().Get(),String(gB)));d().Set(0);})),gt);const gv=(gu.h.push(L(gu.k, "sellbutton", () => gu.i, (gA) => { let gB;const gC=(i().Find((gF) => gF[0]==e().Get()))[1];const gD=(f().Find((gF) => gF[0]==e().Get()))[1];const gE=c().Get();if(gE>=0)gC>=gE?(h().Set(h().Get()+gE*gD),i().Append([e().Get(), gC-c().Get()])):i().Append([e().Get(), gC]);else i().Append([e().Get(), gC]);u.Value(gA.Vars.Hole("moneyowned")).Set((gB=h().Get(),String(gB)));c().Set(0);})),gu);const gw=M(gv.k, gv.h, [["moneyowned", 0, null], ["selectedstock", 0, null], ["inputbuy", 1, null], ["inputsell", 1, null]]);const gx=new o(gw[1], J(gw[0]));let gy=(gv.i=gx,gx);const gz=gy.Doc;bu("");bM.RunById("game", gz);}
function c(){ return P.inputSell;}
function d(){ return P.inputBuy;}
function e(){ return P.selectedStock;}
function f(){ return P.stocksPrice;}
function g(){ return P.lastDayStocksPrice;}
function h(){ return P.money;}
function i(){ return P.stocksList;}
class j { Equals(gh){ return this===gh;} GetHashCode(){ return -1;} }
class k extends j { Next(gh, gi){ return gh>gi?l("'minValue' cannot be greater than maxValue."):gh+Math.floor(Math.random()*(gi-gh));} }
function l(gh){ throw new Error(gh);}
function m(gh){ return[gh.K, gh.V];}
function n(gh, gi){ const gj=1+gi-gh;return gj<=0?[]:bm(gj, (gk) => gk+gh);}
class o extends j { doc;allVars;anchorRoot;get Doc(){ return this.doc;} Hole(gh){ return this.allVars.Item(gh);} SetAnchorRoot(gh){ this.anchorRoot=gh;} constructor(gh, gi){ super();this.doc=gi;this.allVars=gh.$==0?gh.$0:l("Should not happen");this.anchorRoot=null;} }
function p(gh, gi){ q(gh, gi);return gh[gi];}
function q(gh, gi){ if(gi<0||gi>=gh.length)l("Index was outside the bounds of the array.");}
function r(gh){ return gh.dims===2?gh.length*gh.length:gh.length;}
function s(gh, gi, gj){ q(gh, gi);gh[gi]=gj;}
class t extends j { i;k;h;s;static New_1(){ return new this("New_1");} constructor(gh){ if(gh=="New_1"){ let gi;super();this.i=null;this.k=(gi=T(),String(gi));this.h=f$([]);ga(this, "s", null);} } }
class u extends j { static Value(gh){ return gh.ValueObj;} ForTextView(){ console.warn("Content hole filled with attribute data", this.Name);return null;} AddAttribute(gh, gi){ console.warn("Var hole filled with non-Var data", this.Name);} get AsChoiceView(){ console.warn("Attribute value hole filled with non-text data", this.Name);return ew("");} }
class v extends j { key;u0076ar;storage;v;it;Find(gh){ return V(gh, this.u0076ar.Get());} Clear(){ this.u0076ar.Set(this.storage.SSet([]));this.ObsoleteAll();} AppendMany(gh){ const gi=f$([]);this.u0076ar.Set(this.storage.SAppendMany(gi, bc((gj, gk) => { const gl=this.key(gk);this.ObsoleteKey(gl);const gm=W((gn) => w(this.key(gn), gl), gj);return gm==null?(gi.push(gk),gj):this.storage.SSetAt(gm.$0, gk, gj);}, this.u0076ar.Get(), gh)));} ObsoleteAll(){ be((gh) => { ci(gh.V);}, this.it);this.it.Clear();} ObsoleteKey(gh){ let gi;const gj=(gi=null,[this.it.TryGetValue(gh, {get:() => gi, set:(gk) => { gi=gk;}}), gi]);if(gj[0]){ ci(gj[1]);this.it.RemoveKey(gh);} } Append(gh){ const gi=this.u0076ar.Get();const gj=this.key(gh);const gk=W((gl) => w(this.key(gl), gj), gi);if(gk!=null&&gk.$==1)this.u0076ar.Set(this.storage.SSetAt(gk.$0, gh, gi));else this.u0076ar.Set(this.storage.SAppend(gh, gi));this.ObsoleteKey(gj);} GetEnumerator(){ return ct(this.u0076ar.Get());} GetEnumerator0(){ return cw(this.u0076ar.Get());} static New(gh, gi){ return new this("New", gh, gi);} static New_3(gh, gi, gj){ return new this("New_3", gh, gi, gj);} constructor(gh, gi, gj, gk){ let gl;let gm;if(gh=="New"){ gl=gi;gm=gj;gh="New_3";gi=gl;gj=S.Create_1(u0031(bg(gl, gm.SInit())));gk=gm;} if(gh=="New_3"){ const gn=gi;const go=gj;const gp=gk;super();this.key=gn;this.u0076ar=go;this.storage=gp;this.v=cM((gq) => gq.slice(), this.u0076ar.View);this.it=new bs("New_5");} } }
function w(gh, gi){ if(gh===gi)return true;else { const gj=typeof gh;if(gj=="object"){ if(gh===null||gh===void 0||gi===null||gi===void 0||!w(typeof gi, "object"))return false;else if("Equals"in gh)return gh.Equals(gi);else if("Equals"in gi)return false;else if(gh instanceof Array&&gi instanceof Array)return x(gh, gi);else if(gh instanceof Date&&gi instanceof Date)return y(gh, gi);else { const gk=[true];let gl;for(var gn in gh)if(((go) => { gk[0]=!gh.hasOwnProperty(go)||gi.hasOwnProperty(go)&&w(gh[go], gi[go]);return!gk[0];})(gn))break;if(gk[0]){ let gm;for(var go in gi)if(((gp) => { gk[0]=!gi.hasOwnProperty(gp)||gh.hasOwnProperty(gp);return!gk[0];})(go))break;} return gk[0];} } else return gj=="function"&&("$Func"in gh?gh.$Func===gi.$Func&&gh.$Target===gi.$Target:"$Invokes"in gh&&"$Invokes"in gi&&x(gh.$Invokes, gi.$Invokes));} }
function x(gh, gi){ let gj;let gk;if(r(gh)===r(gi)){ gj=true;gk=0;while(gj&&gk<r(gh)){!w(p(gh, gk), p(gi, gk))?gj=false:void 0;gk=gk+1;} return gj;} else return false;}
function y(gh, gi){ return gh.getTime()===gi.getTime();}
function z(gh){ const gi=typeof gh;return gi=="function"?0:gi=="boolean"?gh?1:0:gi=="number"?gh:gi=="string"?A(gh):gi=="object"?gh==null?0:gh instanceof Array?B(gh):C(gh):0;}
function A(gh){ let gi;if(gh===null)return 0;else { gi=5381;for(let gj=0, gk=gh.length-1;gj<=gk;gj++)gi=D(gi, gh[gj].charCodeAt());return gi;} }
function B(gh){ let gi=-34948909;for(let gj=0, gk=r(gh)-1;gj<=gk;gj++)gi=D(gi, z(p(gh, gj)));return gi;}
function C(gh){ if("GetHashCode"in gh)return gh.GetHashCode();else { const gi=[0];let gj;for(var gk in gh)if(((gl) => { gi[0]=D(D(gi[0], A(gl)), z(gh[gl]));return false;})(gk))break;return gi[0];} }
function D(gh, gi){ return(gh<<5)+gh+gi;}
function E(gh, gi){ if(gh===gi)return 0;else { const gj=typeof gh;switch(gj=="function"?1:gj=="boolean"?2:gj=="number"?2:gj=="string"?2:gj=="object"?3:0){ case 0:return typeof gi=="undefined"?0:-1;case 1:return l("Cannot compare function values.");case 2:return gh<gi?-1:1;case 3:if(gh===null)return -1;else if(gi===null)return 1;else if("CompareTo"in gh)return gh.CompareTo(gi);else if("CompareTo0"in gh)return gh.CompareTo0(gi);else if(gh instanceof Array&&gi instanceof Array)return F(gh, gi);else if(gh instanceof Date&&gi instanceof Date)return G(gh, gi);else { const gk=[0];let gl;for(var gn in gh)if(((go) =>!gh.hasOwnProperty(go)?false:!gi.hasOwnProperty(go)?(gk[0]=1,true):(gk[0]=E(gh[go], gi[go]),gk[0]!==0))(gn))break;if(gk[0]===0){ let gm;for(var go in gi)if(((gp) =>!gi.hasOwnProperty(gp)?false:!gh.hasOwnProperty(gp)&&(gk[0]=-1,true))(go))break;} return gk[0];} break;} } }
function F(gh, gi){ let gj;let gk;if(r(gh)<r(gi))return -1;else if(r(gh)>r(gi))return 1;else { gj=0;gk=0;while(gj===0&&gk<r(gh)){ gj=E(p(gh, gk), p(gi, gk));gk=gk+1;} return gj;} }
function G(gh, gi){ return E(gh.getTime(), gi.getTime());}
function H(gh){ bu("index");return gh?bv("index", N("stockpriceitem"), gh):void 0;}
function I(gh){ bu("index");return gh?bv("index", N("stockitem"), gh):void 0;}
function J(gh){ bu("index");return gh?bv("index", N("game"), gh):void 0;}
class K extends j { }
function L(gh, gi, gj, gk){ return new bb(gi, (gl) =>(gm) => { const gn=gj();gn.SetAnchorRoot(gl);return gk({Vars:gn, Anchors:gn, Target:gl, Event:gm});});}
function M(gh, gi, gj){ const gk=new bs("New_5");const gl=new cj("New_3");const gm=ct(gi);try { while(gm.MoveNext()){ const gn=gm.Current;const go=gn.Name;gl.SAdd(go);gk.set_Item(go, gn);} } finally { if(typeof gm=="object"&&a(gm))gm.Dispose();} return[bd(gi, Y((gp) => { const gq=gp[0];const gr=gp[1];const gs=gp[2];if(gl.Contains(gq))return null;else { const gt=gr===0?ck.GetOrAddHoleFor(gh, gq, () => { const gu=gs==null?null:N(gs.$0);let gv=S.Create_1(gu==null?"":gu.$0);return new Q(gq, gv);}):gr===1?ck.GetOrAddHoleFor(gh, gq, () => { const gu=gs==null?null:N(gs.$0);let gv=S.Create_1(gu==null?0:gu.$0);return new cl(gq, gv);}):gr===2?ck.GetOrAddHoleFor(gh, gq, () => { const gu=gs==null?null:N(gs.$0);let gv=S.Create_1(gu==null?false:gu.$0);return new cm(gq, gv);}):gr===3?ck.GetOrAddHoleFor(gh, gq, () => { const gu=gs==null?null:N(gs.$0);let gv=S.Create_1(gu==null?-8640000000000000:gu.$0);return new cn(gq, gv);}):gr===4?ck.GetOrAddHoleFor(gh, gq, () => new co(gq, S.Create_1([]))):gr===5?ck.GetOrAddHoleFor(gh, gq, () => new cp(gq, S.Create_1(N(globalThis.document.querySelector("[ws-dom="+gq+"]"))))):gr===6?ck.GetOrAddHoleFor(gh, gq, () => { const gu=gs==null?null:N(gs.$0);let gv=S.Create_1(gu==null?[]:gu.$0);return new cr(gq, gv);}):l("Invalid value type");gk.set_Item(gq, gt);return N(gt);} }, gj)), {$:0, $0:gk}];}
function N(gh){ return{$:1, $0:gh};}
class O extends u { name;fillWith;get ValueObj(){ return this.Value;} get Value(){ return this.fillWith;} get Name(){ return this.name;} ForTextView(){ return N(cM(String, this.fillWith.View));} AddAttribute(gh, gi){(gh(gi))(ek(this.fillWith));} get AsChoiceView(){ return ex(cM(String, this.fillWith.View));} constructor(gh, gi){ super();this.name=gh;this.fillWith=gi;} }
let P=gb((gh) => class gi { static { P=gh(this);} static lastDayStocksPrice;static stocksPrice;static stocksList;static selectedStock;static money;static inputSell;static inputBuy;static { this.inputBuy=S.Create_1(0);this.inputSell=S.Create_1(0);this.money=S.Create_1(100000);this.selectedStock=S.Create_1("NASDAQ");this.stocksList=bO((gj) => gj[0], bQ([["NASDAQ", 0], ["RUSSEL", 0], ["IBEX", 0], ["NIKKEI", 0]]));this.stocksPrice=bO((gj) => gj[0], bQ([["NASDAQ", 16300], ["RUSSEL", 1890], ["IBEX", 13000], ["NIKKEI", 34800]]));this.lastDayStocksPrice=bO((gj) => gj[0], bQ([["NASDAQ", 16300], ["RUSSEL", 1890], ["IBEX", 13000], ["NIKKEI", 34800]]));} });
class Q extends u { name;fillWith;get ValueObj(){ return this.Value;} get Value(){ return this.fillWith;} get Name(){ return this.name;} ForTextView(){ return N(this.fillWith.View);} AddAttribute(gh, gi){(gh(gi))(el(this.fillWith));} get AsChoiceView(){ return ex(cM(String, this.fillWith.View));} constructor(gh, gi){ super();this.name=gh;this.fillWith=gi;} }
class R extends u { name;fillWith;get ValueObj(){ return this.Value;} get Value(){ return this.fillWith;} get Name(){ return this.name;} constructor(gh, gi){ super();this.name=gh;this.fillWith=gi;} }
let S=gb((gh) => class gi extends j { static { S=gh(this);} static Create_1(gj){ return new bU(false, {s:cH(gj, [])}, gj);} static { } });
function T(){ return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new RegExp("[xy]", "g"), (gh) => { const gi=Math.random()*16|0;const gj=gh=="x"?gi:gi&3|8;return gj.toString(16);});}
class U extends u { name;fillWith;get ValueObj(){ return this.Value;} get Value(){ return this.fillWith;} get Name(){ return this.name;} get AsChoiceView(){ return ew(this.fillWith);} constructor(gh, gi){ super();this.name=gh;this.fillWith=gi;} }
function V(gh, gi){ const gj=X(gh, gi);return gj==null?l("KeyNotFoundException"):gj.$0;}
function W(gh, gi){ let gj=null;let gk=0;while(gk<gi.length&&gj==null){ gh(gi[gk])?gj=N(gk):void 0;gk=gk+1;} return gj;}
function X(gh, gi){ let gj=null;let gk=0;while(gk<gi.length&&gj==null){ gh(gi[gk])?gj=N(gi[gk]):void 0;gk=gk+1;} return gj;}
function Y(gh, gi){ const gj=[];for(let gl=0, gm=gi.length-1;gl<=gm;gl++){ const gk=gh(gi[gl]);if(gk==null){ } else gj.push(gk.$0);} return gj;}
function Z(gh, gi){ let gj=null;let gk=0;while(gk<gi.length&&gj==null){ const gl=gh(gi[gk]);if(gl!=null&&gl.$==1)gj=gl;gk=gk+1;} return gj;}
function u0030(gh, gi){ const gj=Z(gh, gi);return gj==null?l("KeyNotFoundException"):gj.$0;}
function u0031(gh){ if(gh instanceof Array)return gh.slice();else if(gh instanceof cD)return u0035(gh);else { const gi=[];const gj=ct(gh);try { while(gj.MoveNext())gi.push(gj.Current);return gi;} finally { if(typeof gj=="object"&&a(gj))gj.Dispose();} } }
function u0032(gh, gi){ const gj=[];for(let gk=0, gl=gi.length-1;gk<=gl;gk++)if(gh(gi[gk]))gj.push(gi[gk]);return gj;}
function u0033(gh, gi){ let gj=false;let gk=0;while(!gj&&gk<r(gi))if(gh(gi[gk]))gj=true;else gk=gk+1;return gj;}
function u0034(gh){ return Array.prototype.concat.apply([], u0031(gh));}
function u0035(gh){ const gi=[];let gj=gh;while(!(gj.$==0)){ gi.push(bR(gj));gj=bS(gj);} return gi;}
function u0036(gh, gi){ for(let gj=0, gk=gi.length-1;gj<=gk;gj++)gh(gi[gj]);}
function u0037(gh, gi, gj){ let gk=gj;const gl=gi.length;for(let gm=1, gn=gl;gm<=gn;gm++)gk=gh(gi[gl-gm], gk);return gk;}
function u0038(gh, gi){ const gj=new Array(gi.length);for(let gk=0, gl=gi.length-1;gk<=gl;gk++)gj[gk]=gh(gi[gk]);return gj;}
function u0039(gh, gi){ let gj=true;let gk=0;while(gj&&gk<r(gi))if(gh(gi[gk]))gk=gk+1;else gj=false;return gj;}
function $(gh, gi){ const gj=new Array(gh);for(let gk=0, gl=gh-1;gk<=gl;gk++)gj[gk]=gi;return gj;}
function ba(gh, gi){ if(gh<0)l("Negative size given.");else null;const gj=new Array(gh);for(let gk=0, gl=gh-1;gk<=gl;gk++)gj[gk]=gi(gk);return gj;}
class bb extends u { name;fillWith;get ValueObj(){ return this.Value;} get Value(){ return this.fillWith;} get Name(){ return this.name;} constructor(gh, gi){ super();this.name=gh;this.fillWith=gi;} }
function bc(gh, gi, gj){ let gk=gi;const gl=ct(gj);try { while(gl.MoveNext())gk=gh(gk, gl.Current);return gk;} finally { if(typeof gl=="object"&&a(gl))gl.Dispose();} }
function bd(gh, gi){ return{GetEnumerator:() => { const gj=ct(gh);const gk=[true];return new cX(gj, null, (gl) => { if(gl.s.MoveNext()){ gl.c=gl.s.Current;return true;} else { const gm=gl.s;if(!w(gm, null))gm.Dispose();gl.s=null;return gk[0]&&(gk[0]=false,gl.s=ct(gi),gl.s.MoveNext()?(gl.c=gl.s.Current,true):(gl.s.Dispose(),gl.s=null,false));} }, (gl) => { const gm=gl.s;if(!w(gm, null))gm.Dispose();});}};}
function be(gh, gi){ const gj=ct(gi);try { while(gj.MoveNext())gh(gj.Current);} finally { if(typeof gj=="object"&&a(gj))gj.Dispose();} }
function bf(gh){ const gi=ct(gh);try { return gi.MoveNext()?gi.Current:dH();} finally { if(typeof gi=="object"&&a(gi))gi.Dispose();} }
function bg(gh, gi){ return{GetEnumerator:() => { const gj=ct(gi);const gk=new cj("New_3");return new cX(null, null, (gl) => { let gm;let gn;if(gj.MoveNext()){ gm=gj.Current;gn=gk.SAdd(gh(gm));while(!gn&&gj.MoveNext()){ gm=gj.Current;gn=gk.SAdd(gh(gm));} return gn&&(gl.c=gm,true);} else return false;}, () => { gj.Dispose();});}};}
function bh(gh, gi){ return{GetEnumerator:() => { const gj=ct(gi);return new cX(null, null, (gk) => gj.MoveNext()&&(gk.c=gh(gj.Current),true), () => { gj.Dispose();});}};}
function bi(gh){ return{GetEnumerator:() => ct(gh())};}
function bj(gh, gi){ return bl(bh(gh, gi));}
function bk(gh){ const gi=ct(gh);try { if(!gi.MoveNext())bn();let gj=gi.Current;while(gi.MoveNext()){ const gk=gi.Current;if(E(gk, gj)===1)gj=gk;} return gj;} finally { if(typeof gi=="object"&&a(gi))gi.Dispose();} }
function bl(gh){ return{GetEnumerator:() => { const gi=ct(gh);function gj(gk){ while(true){ const gl=gk.s;if(w(gl, null)){ if(gi.MoveNext()){ gk.s=ct(gi.Current);gk=gk;} else { gi.Dispose();return false;} } else if(gl.MoveNext()){ gk.c=gl.Current;return true;} else { gk.Dispose();gk.s=null;gk=gk;} } } return new cX(null, null, gj, (gk) => { const gl=gk.s;if(!w(gl, null))gl.Dispose();if(!w(gi, null))gi.Dispose();});}};}
function bm(gh, gi){ return bo(gh, bp(gi));}
function bn(){ return l("The input sequence was empty.");}
function bo(gh, gi){ gh<0?dJ():void 0;return{GetEnumerator:() => { const gj=[ct(gi)];return new cX(0, null, (gk) => { gk.s=gk.s+1;if(gk.s>gh)return false;else { const gl=gj[0];return w(gl, null)?dH():gl.MoveNext()?(gk.c=gl.Current,gk.s===gh?(gl.Dispose(),gj[0]=null):void 0,true):(gl.Dispose(),gj[0]=null,dH());} }, () => { const gk=gj[0];if(!w(gk, null))gk.Dispose();});}};}
function bp(gh){ return{GetEnumerator:() => new cX(0, null, (gi) => { gi.c=gh(gi.s);gi.s=gi.s+1;return true;}, void 0)};}
function bq(gh, gi){ return!br((gj) =>!gh(gj), gi);}
function br(gh, gi){ const gj=ct(gi);try { let gk=false;while(!gk&&gj.MoveNext())gk=gh(gj.Current);return gk;} finally { if(typeof gj=="object"&&a(gj))gj.Dispose();} }
class bs extends j { equals;hash;count;data;Item(gh){ return this.get(gh);} set_Item(gh, gi){ this.set(gh, gi);} Clear(){ this.data=[];this.count=0;} TryGetValue(gh, gi){ const gj=this.data[this.hash(gh)];if(gj==null)return false;else { const gk=Z((gl) => { const gm=m(gl);return this.equals.apply(null, [gm[0], gh])?N(gm[1]):null;}, gj);return gk!=null&&gk.$==1&&(gi.set(gk.$0),true);} } RemoveKey(gh){ return this.remove(gh);} get(gh){ const gi=this.data[this.hash(gh)];return gi==null?cW():u0030((gj) => { const gk=m(gj);return this.equals.apply(null, [gk[0], gh])?N(gk[1]):null;}, gi);} set(gh, gi){ const gj=this.hash(gh);const gk=this.data[gj];if(gk==null){ this.count=this.count+1;this.data[gj]=new Array({K:gh, V:gi});} else { const gl=W((gm) => this.equals.apply(null, [(m(gm))[0], gh]), gk);if(gl==null){ this.count=this.count+1;gk.push({K:gh, V:gi});} else gk[gl.$0]={K:gh, V:gi};} } remove(gh){ const gi=this.hash(gh);const gj=this.data[gi];if(gj==null)return false;else { const gk=u0032((gl) =>!this.equals.apply(null, [(m(gl))[0], gh]), gj);return r(gk)<gj.length&&(this.count=this.count-1,this.data[gi]=gk,true);} } ContainsKey(gh){ const gi=this.data[this.hash(gh)];return gi==null?false:u0033((gj) => this.equals.apply(null, [(m(gj))[0], gh]), gi);} get Keys(){ return new dK(this);} GetEnumerator(){ return cw(u0034(cq(this.data)));} get Values(){ return new eH(this);} static New_5(){ return new this("New_5");} static New_6(gh, gi, gj){ return new this("New_6", gh, gi, gj);} constructor(gh, gi, gj, gk){ if(gh=="New_5"){ gh="New_6";gi=[];gj=w;gk=z;} if(gh=="New_6"){ const gl=gi;const gm=gj;const gn=gk;super();this.equals=gm;this.hash=gn;this.count=0;this.data=[];const go=ct(gl);try { while(go.MoveNext()){ const gp=go.Current;this.set(gp.K, gp.V);} } finally { if(typeof go=="object"&&a(go))go.Dispose();} } } }
function bt(gh){ const gi={};const gj=ct(gh);try { while(gj.MoveNext()){ const gk=gj.Current;gi[gk[0]]=gk[1];} } finally { if(typeof gj=="object"&&a(gj))gj.Dispose();} return gi;}
function bu(gh){!bw()?(bx(true),by(globalThis.document.body, "")):void 0;bz().set_Item(gh, bA(""));}
function bv(gh, gi, gj){ let gk;const gl=(gk=null,[bA(gh).TryGetValue(gi==null?"":gi.$0, {get:() => gk, set:(gm) => { gk=gm;}}), gk]);return gl[0]?bB(gl[1].cloneNode(true), gj):(console.warn("Local template doesn't exist", gi),bM.Empty);}
function bw(){ return cY.LocalTemplatesLoaded;}
function bx(gh){ cY.LocalTemplatesLoaded=gh;}
function by(gh, gi){ const gj=bA(gi);const gk=new bs("New_5");const gl=gh.querySelectorAll("[ws-template]");for(let gx=0, gy=gl.length-1;gx<=gy;gx++){ const gm=gl[gx];const gn=gm.getAttribute("ws-template").toLowerCase();gm.removeAttribute("ws-template");gk.set_Item(gn, bC(gm));} const go=gh.querySelectorAll("[ws-children-template]");for(let gz=0, gA=go.length-1;gz<=gA;gz++){ const gp=go[gz];const gq=gp.getAttribute("ws-children-template").toLowerCase();gp.removeAttribute("ws-children-template");gk.set_Item(gq, bD(gp));} const gr=gh.querySelectorAll("template[id]");for(let gB=0, gC=gr.length-1;gB<=gC;gB++){ const gs=gr[gB];gk.set_Item(gs.getAttribute("id").toLowerCase(), bE(gs));} const gt=gh.querySelectorAll("template[name]");for(let gD=0, gE=gt.length-1;gD<=gE;gD++){ const gu=gt[gD];gk.set_Item(gu.getAttribute("name").toLowerCase(), bE(gu));} const gv=new cj("New_3");function gw(gF){ if(!gj.ContainsKey(gF)){ let gG;const gH=(gG=null,[gk.TryGetValue(gF, {get:() => gG, set:(gI) => { gG=gI;}}), gG]);if(gH[0]){ gv.SAdd(gF);gk.RemoveKey(gF);bF(gi, N(gF), gH[1], N(gw));} else console.warn(gv.Contains(gF)?"Encountered loop when instantiating "+gF:"Local template does not exist: "+gF);} } while(gk.count>0)gw(bf(gk.Keys));}
function bz(){ return cY.LoadedTemplates;}
function bA(gh){ let gi;const gj=(gi=null,[bz().TryGetValue(gh, {get:() => gi, set:(gl) => { gi=gl;}}), gi]);if(gj[0])return gj[1];else { const gk=new bs("New_5");bz().set_Item(gh, gk);return gk;} }
function bB(gh, gi){ let gj;const gk=bG(gh, bd(gi, bH().Values));const gl=gk[1];const gm=gk[0];const gn=gm.Els;return!w(gn, null)&&gn.length===1&&(p(gn, 0)instanceof Node&&(w(p(gn, 0).nodeType, Node.ELEMENT_NODE)&&(gj=p(gn, 0),true)))?dl.TreeNode(gm, gl):bM.Mk(cx(gm), gl);}
function bC(gh){ gh.removeAttribute("ws-template");const gi=gh.getAttribute("ws-replace");if(gi==null){ } else { gh.removeAttribute("ws-replace");const gj=gh.parentNode;if(w(gj, null)){ } else { const gk=globalThis.document.createElement(gh.tagName);gk.setAttribute("ws-replace", gi);gj.replaceChild(gk, gh);} } const gl=globalThis.document.createElement("div");gl.appendChild(gh);return gl;}
function bD(gh){ const gi=globalThis.document.createElement("div");while(gh.hasChildNodes())gi.appendChild(gh.firstChild);return gi;}
function bE(gh){ const gi=globalThis.document.createElement("div");const gj=gh.content;for(let gk=0, gl=gj.childNodes.length-1;gk<=gl;gk++)gi.appendChild(gj.childNodes[gk].cloneNode(true));return gi;}
function bF(gh, gi, gj, gk){ const gl=new cj("New_3");function gm(gt, gu){ while(true)switch(gt){ case 0:if(gu!==null){ const gv=gu.nextSibling;if(w(gu.nodeType, Node.TEXT_NODE))dn(gu);else if(w(gu.nodeType, Node.ELEMENT_NODE))go(gu);gu=gv;} else return null;break;case 1:const gw=dv(gu.nodeName, N(3), null).toLowerCase();const gx=gw.indexOf(".");const gy=gx===-1?[gh, gw]:[dv(gw, null, N(gx-1)), dv(gw, N(gx+1), null)];const gz=gy[1];const gA=gy[0];if(gA!=""&&!bz().ContainsKey(gA))return do_1(gz);else { if(gA==""&&gk!=null)gk.$0(gz);const gB=bz().Item(gA);if(!gB.ContainsKey(gz))return do_1(gz);else { const gC=gB.Item(gz);const gD=gC.cloneNode(true);const gE=new cj("New_3");const gF=new bs("New_5");const gG=gu.attributes;for(let gQ=0, gR=gG.length-1;gQ<=gR;gQ++){ const gH=gG.item(gQ).name.toLowerCase();const gI=gG.item(gQ).nodeValue;let gJ=gI==""?gH:gI.toLowerCase();gF.set_Item(gH, gJ);if(!gE.SAdd(gH))console.warn("Hole mapped twice", gH);} for(let gS=0, gT=gu.childNodes.length-1;gS<=gT;gS++){ const gK=gu.childNodes[gS];if(w(gK.nodeType, Node.ELEMENT_NODE))if(!gE.SAdd(gK.nodeName.toLowerCase()))console.warn("Hole filled twice", gz);} const gL=gu.childNodes.length===1&&w(gu.firstChild.nodeType, Node.TEXT_NODE);if(gL){ const gM=dp(gD, gu.firstChild.textContent, gz);const gN=((gU) =>(gV) => gU.SAdd(gV))(gE);let gO=((gU) =>(gV) => { if(gV!=null)gU(gV.$0);})((gU) => { gN(gU);});gO(gM);} dq(gD, gE);if(!gL){ for(let gU=0, gV=gu.childNodes.length-1;gU<=gV;gU++){ const gP=gu.childNodes[gU];if(w(gP.nodeType, Node.ELEMENT_NODE))if(gP.hasAttributes())dr(gD, gP);else gn(gD, gP);} } ds(gD, gF);dt(gD, gu.parentNode, gu);gu.parentNode.removeChild(gu);return;} } break;} } function gn(gt, gu){ const gv=gu.nodeName.toLowerCase();const gw=(gA, gB) => { if(gv=="title"&&gu.hasChildNodes()){ const gC=dw(gu.textContent);gu.removeChild(gu.firstChild);while(gC.hasChildNodes())gu.appendChild(gC.firstChild);} go(gu);return dt(gu, gA, gB);};bI(gt, "[ws-attr-holes]", (gA) => { const gB=ez(gA.getAttribute("ws-attr-holes"), [" "], 1);for(let gF=0, gG=gB.length-1;gF<=gG;gF++){ const gC=p(gB, gF);let gD=new RegExp("\\${"+gv+"}", "ig");let gE=gA.getAttribute(gC).replace(gD, gu.textContent);gA.setAttribute(gC, gE);} });const gx=gt.querySelector("[ws-hole="+gv+"]");if(w(gx, null)){ const gy=gt.querySelector("[ws-replace="+gv+"]");if(w(gy, null)){ const gz=gt.querySelector("slot[name="+gv+"]");return gt.tagName.toLowerCase()=="template"?(gw(gz.parentNode, gz),void gz.parentNode.removeChild(gz)):null;} else { gw(gy.parentNode, gy);gy.parentNode.removeChild(gy);return;} } else { while(gx.hasChildNodes())gx.removeChild(gx.lastChild);gx.removeAttribute("ws-hole");return gw(gx, null);} } function go(gt){ if(!gt.hasAttribute("ws-preserve"))if(eA(gt.nodeName.toLowerCase(), "ws-"))gq(gt);else { du(gt);gp(gt.firstChild);} } function gp(gt){ return gm(0, gt);} function gq(gt){ return gm(1, gt);} function gr(gt){ while(true){ const gu=gt.querySelector("[ws-template]");if(w(gu, null)){ const gv=gt.querySelector("[ws-children-template]");if(w(gv, null)){ const gw=gt.querySelectorAll("template[id]");for(let gC=1, gD=gw.length-1;gC<=gD;gC++){ const gx=gw[gC];if(gl.Contains(gx)){ } else { bF(gh, N(gx.getAttribute("id")), gx, null);gl.SAdd(gx);} } const gy=gt.querySelectorAll("template[name]");for(let gE=1, gF=gy.length-1;gE<=gF;gE++){ const gz=gy[gE];if(gl.Contains(gz)){ } else { bF(gh, N(gz.getAttribute("name")), gz, null);gl.SAdd(gz);} } return null;} else { const gA=gv.getAttribute("ws-children-template");gv.removeAttribute("ws-children-template");bF(gh, N(gA), gv, null);gt=gt;} } else { const gB=gu.getAttribute("ws-template");(bJ(gh, N(gB), gu))(null);gt=gt;} } } const gs=(gi==null?"":gi.$0).toLowerCase();bA(gh).set_Item(gs, gj);if(gj.hasChildNodes()){ gr(gj);gp(gj.firstChild);} }
function bG(gh, gi){ let gj;const gk=[];const gl=[];const gm=[];const gn=[];const go=new bs("New_5");const gp=ct(gi);try { while(gp.MoveNext()){ const gq=gp.Current;go.set_Item(gq.Name, gq);} } finally { if(typeof gp=="object"&&a(gp))gp.Dispose();} let gr=dx(gh);const gs=(gB, gC) => { const gD=d0(gB, gC);gl.push(d1(gD));gm.push([gB, gD]);const gE=gc(gD.OnAfterRender);if(gE==null)return null;else { const gF=gE.$0;gn.push(() => { gF(gB);});return;} };const gt=(gB) => { let gC;const gD=(gC=null,[go.TryGetValue(gB, {get:() => gC, set:(gG) => { gC=gG;}}), gC]);if(gD[0]){ const gE=gD[1];if(gE instanceof R)return N(gE.Value);else if(gE instanceof U)return N(bM.TextNode(gE.Value));else { const gF=gE.ForTextView();return gF==null?null:N(bM.TextView(gF.$0));} } else return null;};bI(gh, "[ws-hole]", (gB) => { const gC=gB.getAttribute("ws-hole");gB.removeAttribute("ws-hole");while(gB.hasChildNodes())gB.removeChild(gB.lastChild);const gD=gt(gC);if(gD!=null&&gD.$==1){ const gE=gD.$0;cZ(gB, gE.docNode);gk.push(dj.New(d2(gB), gE.docNode, null, gB, cE(), null));gl.push(gE.updates);} });bI(gh, "[ws-replace]", (gB) => { const gC=gt(gB.getAttribute("ws-replace"));if(gC!=null&&gC.$==1){ const gD=gC.$0;const gE=gB.parentNode;const gF=globalThis.document.createTextNode("");gE.replaceChild(gF, gB);const gG=c6(gF, gD.docNode);gr=dx(gh);const gH=W((gI) => gB===gI, gr);if(gH==null){ } else s(gr, gH.$0, gD.docNode);gk.push(dj.New(d2(gE), gD.docNode, N([gG, gF]), gE, cE(), null));gl.push(gD.updates);} });let gu=false;bI(gh, "slot", (gB) => { const gC=gB.getAttribute("name");const gD=gC==""||gC==null?"default":gC.toLowerCase();if(gu&&gD=="default"||!w(gh.parentElement, null)){ } else { while(gB.hasChildNodes())gB.removeChild(gB.lastChild);if(gD=="default")gu=true;const gE=gt(gD);if(gE!=null&&gE.$==1){ const gF=gE.$0;cZ(gB, gF.docNode);gk.push(dj.New(d2(gB), gF.docNode, null, gB, cE(), null));gl.push(gF.updates);} } });bI(gh, "[ws-attr]", (gB) => { let gC;const gD=gB.getAttribute("ws-attr");gB.removeAttribute("ws-attr");const gE=(gC=null,[go.TryGetValue(gD, {get:() => gC, set:(gG) => { gC=gG;}}), gC]);if(gE[0]){ const gF=gE[1];if(gF instanceof ef)gs(gB, gF.Value);else console.warn("Attribute hole filled with non-attribute data", gD);} });bI(gh, "[ws-on]", (gB) => { gs(gB, et.Concat(Y((gC) => { let gD;const gE=ez(gC, [":"], 1);const gF=(gD=null,[go.TryGetValue(p(gE, 1), {get:() => gD, set:(gH) => { gD=gH;}}), gD]);if(gF[0]){ const gG=gF[1];return gG instanceof eg?N(eh(p(gE, 0), gG.Value)):gG instanceof bb?N(et.Handler(p(gE, 0), gG.Value)):(console.warn("Event hole on"+p(gE, 0)+" filled with non-event data", p(gE, 1)),null);} else return null;}, ez(gB.getAttribute("ws-on"), [" "], 1))));gB.removeAttribute("ws-on");});bI(gh, "[ws-onafterrender]", (gB) => { let gC;const gD=gB.getAttribute("ws-onafterrender");const gE=(gC=null,[go.TryGetValue(gD, {get:() => gC, set:(gG) => { gC=gG;}}), gC]);if(gE[0]){ const gF=gE[1];if(gF instanceof eu){ gB.removeAttribute("ws-onafterrender");gs(gB, ei(gF.Value));} else if(gF instanceof ev){ gB.removeAttribute("ws-onafterrender");gs(gB, ei(gF.Value));} else console.warn("onafterrender hole filled with non-onafterrender data", gD);} });bI(gh, "[ws-var]", (gB) => { let gC;const gD=gB.getAttribute("ws-var");gB.removeAttribute("ws-var");const gE=(gC=null,[go.TryGetValue(gD, {get:() => gC, set:(gF) => { gC=gF;}}), gC]);if(gE[0])gE[1].AddAttribute((gF) =>(gG) => gs(gF, gG), gB);});const gv=() => { bK("[ws-dom]", (gB) => { let gC;let gD;let gE;const gF=(gC=null,[go.TryGetValue(gB.getAttribute("ws-dom").toLowerCase(), {get:() => gC, set:(gJ) => { gC=gJ;}}), gC]);if(gF[0]){ const gG=gF[1];if(gG instanceof cp){ const gH=gG.Value;gB.removeAttribute("ws-dom");gD=gB;const gI=new MutationObserver((gJ, gK) => { u0036((gL) => { gL.removedNodes.forEach(gd((gM) => gM[0]===gD&&gL.addedNodes.length!==1?(gH.SetFinal(null),gK.disconnect()):null), null);}, gJ);});if(gB.parentElement!==null)gI.observe(gB.parentElement, (gE={},gE.childList=true,gE));gH.Set(N(gB));cO((gJ) => { if(gJ!=null&&gJ.$==1){ const gK=gJ.$0;if(gD===gK){ } else { gD.replaceWith(gK);gD=gK;} } else { gD.remove();gI.disconnect();} }, gH.View);} } });};bI(gh, "[ws-attr-holes]", (gB) => { const gC=new RegExp(bL(), "g");const gD=ez(gB.getAttribute("ws-attr-holes"), [" "], 1);gB.removeAttribute("ws-attr-holes");for(let gE=0, gF=gD.length-1;gE<=gF;gE++)((() => { let gG;const gH=p(gD, gE);const gI=gB.getAttribute(gH);let gJ=null;let gK=0;const gL=[];while(gJ=gC.exec(gI),gJ!==null){ const gM=dv(gI, N(gK), N(gC.lastIndex-p(gJ, 0).length-1));gK=gC.lastIndex;gL.push([gM, p(gJ, 1)]);} const gN=dv(gI, N(gK), null);gC.lastIndex=0;const gO=u0037((gT, gU) =>(((gV) => { const gW=gV[0];const gX=gV[1];return(gY) => { let gZ;const g0=gY[0];const g1=gY[1];const g2=(gZ=null,[go.TryGetValue(gX, {get:() => gZ, set:(g4) => { gZ=g4;}}), gZ]);const g3=g2[0]?g2[1].AsChoiceView:ew("");return g3.$==1?[gW, cD.Cons(g0==""?g3.$0:cM((g4) => g4+g0, g3.$0), g1)]:[gW+g3.$0+g0, g1];};})(gT))(gU), gL, [gN, cD.Empty]);if(gO[1].$==1){ if(gO[1].$1.$==1){ if(gO[1].$1.$1.$==1){ if(gO[1].$1.$1.$1.$==0){ const gP=gO[0];gG=ej(gH, cR((gT, gU, gV) => gP+gT+gU+gV, gO[1].$0, gO[1].$1.$0, gO[1].$1.$1.$0));} else { const gQ=gO[0];gG=ej(gH, cM((gT) => gQ+ey("", gT), cS(gO[1])));} } else { const gR=gO[0];gG=ej(gH, cT((gT, gU) => gR+gT+gU, gO[1].$0, gO[1].$1.$0));} } else if(gO[0]=="")gG=ej(gH, gO[1].$0);else { const gS=gO[0];gG=ej(gH, cM((gT) => gS+gT, gO[1].$0));} } else gG=et.Create(gH, gO[0]);return gs(gB, gG);})());});let gw=gr;const gx=gn.length==0?N(() => { gv();}):N((gB) => { gv();u0036((gC) => { gC(gB);}, gn);});const gy=!w(gr, null)&&gr.length===1&&(p(gr, 0)instanceof Node&&(p(gr, 0)instanceof Element&&(gj=p(gr, 0),true)))?N(gj):null;let gz={Els:gw, Dirty:true, Holes:gk, Attrs:gm, Render:gx?gx.$0:void 0, El:gy?gy.$0:void 0};let gA=ge(gz, ["Render", "El"]);return[gA, dY(cN(), cU, gl)];}
function bH(){ return cY.GlobalHoles;}
function bI(gh, gi, gj){ dD(gh, gi, (gk) => { if(gk.closest("[ws-preserve]")==null)gj(gk);});}
function bJ(gh, gi, gj){ const gk=bC(gj);return(gl) => { bF(gh, gi, gk, gl);};}
function bK(gh, gi){ dE(gh, (gj) => { if(gj.closest("[ws-preserve]")==null)gi(gj);});}
function bL(){ return cY.TextHoleRE;}
class bM extends j { docNode;updates;static RunById(gh, gi){ const gj=globalThis.document.getElementById(gh);if(w(gj, null))l("invalid id: "+gh);else bM.Run(gj, gi);} static Convert(gh, gi){ return bM.Flatten(cK(gh, gi));} static Run(gh, gi){ cZ(gh, gi.docNode);bM.RunInPlace(false, gh, gi);} static Flatten(gh){ return bM.EmbedView(cM(bM.Concat, gh));} static get Empty(){ return bM.Mk(null, cN());} static RunInPlace(gh, gi, gj){ const gk=c1(gi, gj.docNode);cO(dL()||dS()?dT(c2(gh, gk, gj.docNode)):() => { c3(gh, gk, gj.docNode);}, gj.updates);} static Concat(gh){ return dY(bM.Empty, bM.Append, dX(gh));} static EmbedView(gh){ const gi=c4();return bM.Mk(cy(gi), cM(() => { }, cQ((gj) => { c5(gi, gj.docNode);return gj.updates;}, gh)));} static Mk(gh, gi){ return new bM(gh, gi);} static Append(gh, gi){ return bM.Mk(cz(gh.docNode, gi.docNode), cU(gh.updates, gi.updates));} static TextNode(gh){ return bM.Mk(cA(globalThis.document.createTextNode(gh)), cN());} static TextView(gh){ const gi=dc();return bM.Mk(cB(gi), cM((gj) => { dd(gi, gj);}, gh));} constructor(gh, gi){ super();this.docNode=gh;this.updates=gi;} }
function bN(gh, gi){ return f3(gh, -2147483648, 2147483647, gi);}
function bO(gh, gi){ return bP(gh, cC(u0031(gi)));}
function bP(gh, gi){ return new v("New", gh, gi);}
function bQ(gh){ let gi=cD.Empty;for(let gj=r(gh)-1, gk=0;gj>=gk;gj--)gi=cD.Cons(p(gh, gj), gi);return gi;}
function bR(gh){ return gh.$==1?gh.$0:bT();}
function bS(gh){ return gh.$==1?gh.$1:bT();}
function bT(){ return l("The input list was empty.");}
class bU extends K { isConst;current;snap;view;id;Get(){ return this.current;} Set(gh){ if(this.isConst)(((gi) => gi("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))((gi) => { console.log(gi);}));else { ci(this.snap);this.current=gh;this.snap={s:cH(gh, [])};} } SetFinal(gh){ if(this.isConst)(((gi) => gi("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))((gi) => { console.log(gi);}));else { ci(this.snap);this.isConst=true;this.current=gh;this.snap={s:cI(gh)};} } get View(){ return this.view;} UpdateMaybe(gh){ const gi=gh(this.Get());if(gi!=null&&gi.$==1)this.Set(gi.$0);} constructor(gh, gi, gj){ super();this.isConst=gh;this.current=gj;this.snap=gi;this.view=() => this.snap;this.id=cE();} }
function bV(gh, gi){ const gj=gi.s;if(gj!=null&&gj.$==0)return{s:cI(gh(gj.$0))};else { const gk={s:cJ([], [])};bY(gi, (gl) => { bZ(gk, gi, gh(gl));}, gk);return gk;} }
function bW(gh, gi, gj){ const gk=gh.s;if(gk==null)gj();else gk!=null&&gk.$==2?(gk.$1.push(gj),gi(gk.$0)):gk!=null&&gk.$==3?(gk.$0.push(gi),gk.$1.push(gj)):gi(gk.$0);}
function bX(gh, gi){ const gj=gh.s;if(gj==null)gi();else gj!=null&&gj.$==2?gj.$1.push(gi):gj!=null&&gj.$==3?gj.$1.push(gi):void 0;}
function bY(gh, gi, gj){ const gk=gh.s;if(gk==null)ci(gj);else gk!=null&&gk.$==2?(b5(gk.$1, gj),gi(gk.$0)):gk!=null&&gk.$==3?(gk.$0.push(gi),b5(gk.$1, gj)):gi(gk.$0);}
function bZ(gh, gi, gj){ const gk=gi.s;if(gk!=null&&gk.$==0)b6(gh, gj);else b7(gh, gj);}
function b0(gh, gi, gj, gk){ const gl=gi.s;const gm=gj.s;const gn=gk.s;if(gl!=null&&gl.$==0)return gm!=null&&gm.$==0?gn!=null&&gn.$==0?{s:cI(gh(gl.$0, gm.$0, gn.$0))}:b9(gh, gl.$0, gm.$0, gk):gn!=null&&gn.$==0?b_(gh, gl.$0, gn.$0, gj):b$(gh, gl.$0, gj, gk);else if(gm!=null&&gm.$==0)return gn!=null&&gn.$==0?ca(gh, gm.$0, gn.$0, gi):cb(gh, gm.$0, gi, gk);else if(gn!=null&&gn.$==0)return cc(gh, gn.$0, gi, gj);else { const go={s:cJ([], [])};const gp=() => { const gq=go.s;if(!(gq!=null&&gq.$==0||gq!=null&&gq.$==2)){ const gr=cd(gi);const gs=cd(gj);const gt=cd(gk);if(gr!=null&&gr.$==1)if(gs!=null&&gs.$==1)if(gt!=null&&gt.$==1)if(gr.$0[1]&&gs.$0[1]&&gt.$0[1])b6(go, gh(gr.$0[0], gs.$0[0], gt.$0[0]));else b7(go, gh(gr.$0[0], gs.$0[0], gt.$0[0]));} };bY(gi, gp, go);bY(gj, gp, go);bY(gk, gp, go);return go;} }
function b1(gh){ const gi=u0031(gh);if(gi.length==0)return{s:cI([])};else { const gj={s:cJ([], [])};const gk=[r(gi)-1];const gl=() => { if(gk[0]===0){ const gm=u0038((gn) => { const go=gn.s;return go!=null&&go.$==0?go.$0:go!=null&&go.$==2?go.$0:l("value not found by View.Sequence");}, gi);if(u0039((gn) => { const go=gn.s;return go!=null&&go.$==0;}, gi))b6(gj, gm);else b7(gj, gm);} else gk[0]=gk[0]-1;};u0036((gm) => { bY(gm, gl, gj);}, gi);return gj;} }
function b2(gh, gi, gj){ const gk=gi.s;const gl=gj.s;if(gk!=null&&gk.$==0)return gl!=null&&gl.$==0?{s:cI(gh(gk.$0, gl.$0))}:ce(gh, gk.$0, gj);else if(gl!=null&&gl.$==0)return cf(gh, gl.$0, gi);else { const gm={s:cJ([], [])};const gn=() => { const go=gm.s;if(!(go!=null&&go.$==0||go!=null&&go.$==2)){ const gp=cd(gi);const gq=cd(gj);if(gp!=null&&gp.$==1)if(gq!=null&&gq.$==1)if(gp.$0[1]&&gq.$0[1])b6(gm, gh(gp.$0[0], gq.$0[0]));else b7(gm, gh(gp.$0[0], gq.$0[0]));} };bY(gi, gn, gm);bY(gj, gn, gm);return gm;} }
function b3(gh, gi){ const gj=gh.s;const gk=gi.s;if(gj!=null&&gj.$==0)return gk!=null&&gk.$==0?{s:cI(null)}:gi;else if(gk!=null&&gk.$==0)return gh;else { const gl={s:cJ([], [])};const gm=() => { const gn=gl.s;if(!(gn!=null&&gn.$==0||gn!=null&&gn.$==2)){ const go=cd(gh);const gp=cd(gi);if(go!=null&&go.$==1)if(gp!=null&&gp.$==1)if(go.$0[1]&&gp.$0[1])b6(gl, null);else b7(gl, null);} };bY(gh, gm, gl);bY(gi, gm, gl);return gl;} }
function b4(gh){ const gi=gh.s;if(gi==null)return gh;else if(gi!=null&&gi.$==2){ const gj={s:cH(gi.$0, [])};cg(gh, gj);return gj;} else if(gi!=null&&gi.$==3){ const gk={s:cJ([], [])};bY(gh, (gl) => { bZ(gk, gh, gl);}, gk);return gk;} else return gh;}
function b5(gh, gi){ gh.push(gi);if(gh.length%20===0){ const gj=gh.slice(0);f0(gh);for(let gl=0, gm=r(gj)-1;gl<=gm;gl++){ const gk=p(gj, gl);if(typeof gk=="object")(((gn) => { if(gn.s)gh.push(gn);})(gk));else(((gn) => { gh.push(gn);})(gk));} } else void 0;}
function b6(gh, gi){ const gj=gh.s;if(gj!=null&&gj.$==3){ gh.s=cI(gi);const gk=gj.$0;for(let gl=0, gm=r(gk)-1;gl<=gm;gl++)(p(gk, gl))(gi);} else void 0;}
function b7(gh, gi){ const gj=gh.s;if(gj!=null&&gj.$==3){ gh.s=cH(gi, gj.$1);const gk=gj.$0;for(let gl=0, gm=r(gk)-1;gl<=gm;gl++)(p(gk, gl))(gi);} else void 0;}
function b8(gh){ const gi={s:cJ([], [])};bY(gh, (gj) => { const gk=gj();bY(gk, (gl) => { let gm;const gn=gk.s;if(gn!=null&&gn.$==0){ const go=gh.s;gm=go!=null&&go.$==0;} else gm=false;if(gm)b6(gi, gl);else b7(gi, gl);}, gi);}, gi);return gi;}
function b9(gh, gi, gj, gk){ return bV((gl) => gh(gi, gj, gl), gk);}
function b_(gh, gi, gj, gk){ return bV((gl) => gh(gi, gl, gj), gk);}
function b$(gh, gi, gj, gk){ return b2((gl, gm) => gh(gi, gl, gm), gj, gk);}
function ca(gh, gi, gj, gk){ return bV((gl) => gh(gl, gi, gj), gk);}
function cb(gh, gi, gj, gk){ return b2((gl, gm) => gh(gl, gi, gm), gj, gk);}
function cc(gh, gi, gj, gk){ return b2((gl, gm) => gh(gl, gm, gi), gj, gk);}
function cd(gh){ const gi=gh.s;return gi!=null&&gi.$==0?N([gi.$0, true]):gi!=null&&gi.$==2?N([gi.$0, false]):null;}
function ce(gh, gi, gj){ return bV((gk) => gh(gi, gk), gj);}
function cf(gh, gi, gj){ return bV((gk) => gh(gk, gi), gj);}
function cg(gh, gi){ const gj=gh.s;if(gj==null)ci(gi);else gj!=null&&gj.$==2?b5(gj.$1, gi):gj!=null&&gj.$==3?b5(gj.$1, gi):void 0;}
class ch { }
function ci(gh){ let gi;const gj=gh.s;if(gj==null||(gj!=null&&gj.$==2?(gi=gj.$1,false):gj!=null&&gj.$==3?(gi=gj.$1,false):true))void 0;else { gh.s=null;for(let gl=0, gm=r(gi)-1;gl<=gm;gl++){ const gk=p(gi, gl);if(typeof gk=="object")(((gn) => { ci(gn);})(gk));else gk();} } }
class cj extends j { equals;hash;data;count;SAdd(gh){ return this.add(gh);} Contains(gh){ const gi=this.data[this.hash(gh)];return gi==null?false:this.arrContains(gh, gi);} add(gh){ const gi=this.hash(gh);const gj=this.data[gi];return gj==null?(this.data[gi]=[gh],this.count=this.count+1,true):this.arrContains(gh, gj)?false:(gj.push(gh),this.count=this.count+1,true);} arrContains(gh, gi){ let gj=true;let gk=0;const gl=gi.length;while(gj&&gk<gl)if(this.equals.apply(null, [gi[gk], gh]))gj=false;else gk=gk+1;return!gj;} GetEnumerator(){ return ct(e_(this.data));} ExceptWith(gh){ const gi=ct(gh);try { while(gi.MoveNext())this.Remove(gi.Current);} finally { if(typeof gi=="object"&&a(gi))gi.Dispose();} } get Count(){ return this.count;} IntersectWith(gh){ const gi=new cj("New_4", gh, this.equals, this.hash);const gj=e_(this.data);for(let gl=0, gm=gj.length-1;gl<=gm;gl++){ const gk=gj[gl];if(!gi.Contains(gk))this.Remove(gk);} } Remove(gh){ const gi=this.data[this.hash(gh)];return gi==null?false:this.arrRemove(gh, gi)&&(this.count=this.count-1,true);} CopyTo(gh, gi){ const gj=e_(this.data);for(let gk=0, gl=gj.length-1;gk<=gl;gk++)s(gh, gk+gi, gj[gk]);} arrRemove(gh, gi){ let gj=true;let gk=0;const gl=gi.length;while(gj&&gk<gl)if(this.equals.apply(null, [gi[gk], gh])){ gi.splice(gk, 1);gj=false;} else gk=gk+1;return!gj;} static New_3(){ return new this("New_3");} static New_4(gh, gi, gj){ return new this("New_4", gh, gi, gj);} static New_2(gh){ return new this("New_2", gh);} constructor(gh, gi, gj, gk){ if(gh=="New_3"){ gh="New_4";gi=[];gj=w;gk=z;} let gl;if(gh=="New_2"){ gl=gi;gh="New_4";gi=gl;gj=w;gk=z;} if(gh=="New_4"){ const gm=gi;const gn=gj;const go=gk;super();this.equals=gn;this.hash=go;this.data=[];this.count=0;const gp=ct(gm);try { while(gp.MoveNext())this.add(gp.Current);} finally { if(typeof gp=="object"&&a(gp))gp.Dispose();} } } }
let ck=gb((gh) => class gi extends j { static { ck=gh(this);} static init;id;vars;static initialized;static instances;static GetOrAddHoleFor(gj, gk, gl){ let gm;const gn=ck.GetHolesFor(gj);const go=(gm=null,[gn.TryGetValue(gk, {get:() => gm, set:(gq) => { gm=gq;}}), gm]);if(go[0])return go[1];else { const gp=gl();gn.set_Item(gk, gp);return gp;} } static GetHolesFor(gj){ let gk;const gl=(gk=null,[ck.initialized.TryGetValue(gj, {get:() => gk, set:(gn) => { gk=gn;}}), gk]);if(gl[0])return gl[1];else { const gm=new bs("New_5");ck.initialized.set_Item(gj, gm);return gm;} } static { ck.initialized=new bs("New_5");ck.instances=new bs("New_5");} });
class cl extends u { name;fillWith;get ValueObj(){ return this.Value;} get Name(){ return this.name;} get Value(){ return this.fillWith;} ForTextView(){ return N(cM(String, this.fillWith.View));} AddAttribute(gh, gi){(gh(gi))(em(this.fillWith));} get AsChoiceView(){ return ex(cM(String, this.fillWith.View));} constructor(gh, gi){ super();this.name=gh;this.fillWith=gi;} }
class cm extends u { name;fillWith;get ValueObj(){ return this.Value;} get Name(){ return this.name;} get Value(){ return this.fillWith;} ForTextView(){ return N(cM(String, this.fillWith.View));} AddAttribute(gh, gi){(gh(gi))(en(this.fillWith));} get AsChoiceView(){ return ex(cM(String, this.fillWith.View));} constructor(gh, gi){ super();this.name=gh;this.fillWith=gi;} }
class cn extends u { name;fillWith;get ValueObj(){ return this.Value;} get Name(){ return this.name;} get Value(){ return this.fillWith;} ForTextView(){ return N(cM((gh) =>(new Date(gh)).toLocaleString(), this.fillWith.View));} AddAttribute(gh, gi){(gh(gi))(eo(this.fillWith));} get AsChoiceView(){ return ex(cM((gh) =>(new Date(gh)).toLocaleString(), this.fillWith.View));} constructor(gh, gi){ super();this.name=gh;this.fillWith=gi;} }
class co extends u { name;fillWith;get ValueObj(){ return this.Value;} get Name(){ return this.name;} get Value(){ return this.fillWith;} ForTextView(){ return N(cM(String, this.fillWith.View));} AddAttribute(gh, gi){(gh(gi))(ep(this.fillWith));} get AsChoiceView(){ return ex(cM(String, this.fillWith.View));} constructor(gh, gi){ super();this.name=gh;this.fillWith=gi;} }
class cp extends u { name;fillWith;get ValueObj(){ return this.Value;} get Name(){ return this.name;} get Value(){ return this.fillWith;} constructor(gh, gi){ super();this.name=gh;this.fillWith=gi;} }
function cq(gh){ let gi=[];let gj;for(var gk in gh)gi.push(gh[gk]);return gi;}
class cr extends u { name;fillWith;get ValueObj(){ return this.Value;} get Name(){ return this.name;} get Value(){ return this.fillWith;} ForTextView(){ return N(cM((gh) => ey(",", gh), this.fillWith.View));} AddAttribute(gh, gi){(gh(gi))(eq(this.fillWith));} get AsChoiceView(){ return ex(cM(String, this.fillWith.View));} constructor(gh, gi){ super();this.name=gh;this.fillWith=gi;} }
class cs extends j { }
function ct(gh){ return gh instanceof Array?cu(gh):w(typeof gh, "string")?cv(gh):gh.GetEnumerator();}
function cu(gh){ return new cX(0, null, (gi) => { const gj=gi.s;return gj<r(gh)&&(gi.c=p(gh, gj),gi.s=gj+1,true);}, void 0);}
function cv(gh){ return new cX(0, null, (gi) => { const gj=gi.s;return gj<gh.length&&(gi.c=gh[gj],gi.s=gj+1,true);}, void 0);}
function cw(gh){ return gh instanceof Array?cu(gh):w(typeof gh, "string")?cv(gh):"GetEnumerator0"in gh?gh.GetEnumerator0():gh.GetEnumerator();}
function cx(gh){ return{$:6, $0:gh};}
function cy(gh){ return{$:2, $0:gh};}
function cz(gh, gi){ return{$:0, $0:gh, $1:gi};}
function cA(gh){ return{$:5, $0:gh};}
function cB(gh){ return{$:4, $0:gh};}
function cC(gh){ return new dk(gh);}
class cD { static Empty=gf(cD, {$:0});static Cons(gh, gi){ return gf(cD, {$:1, $0:gh, $1:gi});} GetEnumerator(){ return new cX(this, null, (gh) => { const gi=gh.s;return gi.$==0?false:(gh.c=gi.$0,gh.s=gi.$1,true);}, void 0);} }
function cE(){ cF(cG()+1);return cG();}
function cF(gh){ dV.counter=gh;}
function cG(){ return dV.counter;}
function cH(gh, gi){ return{$:2, $0:gh, $1:gi};}
function cI(gh){ return{$:0, $0:gh};}
function cJ(gh, gi){ return{$:3, $0:gh, $1:gi};}
function cK(gh, gi){ return cL((gj) => gj, gh, gi);}
function cL(gh, gi, gj){ const gk=[new bs("New_5")];return cM((gl) => { const gm=gk[0];const gn=new bs("New_5");const go=dW((gp) => { const gq=gh(gp);const gr=gm.ContainsKey(gq)?gm.Item(gq):gi(gp);gn.set_Item(gq, gr);return gr;}, u0031(gl));gk[0]=gn;return go;}, gj);}
function cM(gh, gi){ return cP(() => bV(gh, gi()));}
function cN(gh){ const gi={s:cI(gh)};return() => gi;}
function cO(gh, gi){ function gj(){ bW(gi(), gh, () => { eV().Fork(gj);});} eV().Fork(gj);}
function cP(gh){ const gi={c:null, o:gh};return() => { let gj=gi.c;if(gj===null){ gj=gi.o();gi.c=gj;const gk=gj.s;if(gk!=null&&gk.$==0)gi.o=null;else bX(gj, () => { gi.c=null;});return gj;} else return gj;};}
function cQ(gh, gi){ return cV(cM(gh, gi));}
function cR(gh, gi, gj, gk){ return cP(() => b0(gh, gi(), gj(), gk()));}
function cS(gh){ return cP(() => b1(bh((gi) => gi(), gh)));}
function cT(gh, gi, gj){ return cP(() => b2(gh, gi(), gj()));}
function cU(gh, gi){ return cP(() => b3(gh(), gi()));}
function cV(gh){ return cP(() => b8(gh()));}
function cW(){ throw new dm("New");}
class cX extends j { s;c;n;d;e;MoveNext(){ const gh=this.n(this);this.e=gh?1:2;return gh;} get Current(){ return this.e===1?this.c:this.e===0?l("Enumeration has not started. Call MoveNext."):l("Enumeration already finished.");} Dispose(){ if(this.d)this.d(this);} constructor(gh, gi, gj, gk){ super();this.s=gh;this.c=gi;this.n=gj;this.d=gk;this.e=0;} }
let cY=gb((gh) => class gi { static { cY=gh(this);} static RenderedFullDocTemplate;static TextHoleRE;static GlobalHoles;static LocalTemplatesLoaded;static LoadedTemplates;static { this.LoadedTemplates=new bs("New_5");this.LocalTemplatesLoaded=false;this.GlobalHoles=new bs("New_5");this.TextHoleRE="\\${([^}]+)}";this.RenderedFullDocTemplate=null;} });
function cZ(gh, gi){ c0(gh, gi, null);}
function c0(gh, gi, gj){ while(true){ if(gi!=null&&gi.$==1)return c7(gh, gi.$0.El, gj);else if(gi!=null&&gi.$==2){ const gk=gi.$0;gk.Dirty=false;gi=gk.Current;} else if(gi==null)return gj;else if(gi!=null&&gi.$==4)return c7(gh, gi.$0.Text, gj);else if(gi!=null&&gi.$==5)return c7(gh, gi.$0, gj);else if(gi!=null&&gi.$==6)return u0037((gn, go) =>((((gp) =>(gq) =>(gr) => gq==null||gq.constructor===Object?c0(gp, gq, gr):c7(gp, gq, gr))(gh))(gn))(go), gi.$0.Els, gj);else { const gl=gi.$1;const gm=gi.$0;gi=gm;gj=c0(gh, gl, gj);} } }
function c1(gh, gi){ return eI(eJ(), c8(gh, d6(), gi));}
function c2(gh, gi, gj){ if(dL()){ const gk=null;return eQ(() => { const gl=eK(gj);const gm=da(gi, gl);const gn=c$(gi, gl);return eR(dM(dN(gm, c_(gi, gl))), () => eR(c9(gh, gi), () => eR(dM(gn), () => { gi.PreviousNodes=gl;return eU(null);})));});} else return c9(gh, gi);}
function c3(gh, gi, gj){ const gk=eK(gj);db(gh, gi.Top);gi.PreviousNodes=gk;}
function c4(){ return{Current:null, Dirty:false};}
function c5(gh, gi){ gh.Current=gi;gh.Dirty=true;}
function c6(gh, gi){ const gj=gh.parentNode;const gk=globalThis.document.createTextNode("");gj.insertBefore(gk, gh);de(gh, gi);return gk;}
function c7(gh, gi, gj){ dF(gh, gj, gi);return gi;}
function c8(gh, gi, gj){ cZ(gh, gj);const gk=d0(gh, gi);return dj.New(gk, gj, null, gh, cE(), gc(gk.OnAfterRender));}
function c9(gh, gi){ if(dS()){ const gj=(gk) => { requestAnimationFrame(() => { db(gh, gi.Top);gk();});};return eZ((gk, gl, gm) => gj.apply(null, [gk, gl, gm]));} else { db(gh, gi.Top);return eU(null);} }
function c_(gh, gi){ return dQ(u0038((gj) => d8(gj.Attr), eO(eN(gi, eM((gj) => d7(gj.Attr), gh.PreviousNodes)))));}
function c$(gh, gi){ return dQ(u0038((gj) => d_(gj.Attr), eO(eN(gh.PreviousNodes, eM((gj) => d9(gj.Attr), gi)))));}
function da(gh, gi){ const gj=(gl) => d$(gl.Attr);const gk=(gl) => eM(gj, gl);return dQ(u0038((gl) => ea(gl.Attr), eO(eP(gk(gh.PreviousNodes), gk(gi)))));}
function db(gh, gi){!gh?df(gi):void 0;dg(gi.Children);dh(gi);}
function dc(){ return{Text:globalThis.document.createTextNode(""), Dirty:false, Value:""};}
function dd(gh, gi){ gh.Value=gi;gh.Dirty=true;}
function de(gh, gi){ c0(gh.parentNode, gi, gh);}
function df(gh){ function gi(gj){ function gk(gl){ while(true){ if(gl!=null&&gl.$==0){ const gm=gl.$1;const gn=gl.$0;if(gk(gn))return true;else gl=gm;} else if(gl!=null&&gl.$==2){ const go=gl.$0;if(go.Dirty)return true;else gl=go.Current;} else if(gl!=null&&gl.$==6){ const gp=gl.$0;return gp.Dirty||u0033(gi, gp.Holes);} else return false;} } return gk(gj.Children);} ed(gh.El, gh.Attr);if(gi(gh))di(gh);}
function dg(gh){ while(true){ if(gh!=null&&gh.$==1)return db(false, gh.$0);else if(gh!=null&&gh.$==2){ const gi=gh.$0;gh=gi.Current;} else if(gh==null)return null;else if(gh!=null&&gh.$==5)return null;else if(gh!=null&&gh.$==4){ const gj=gh.$0;return gj.Dirty?(gj.Text.nodeValue=gj.Value,gj.Dirty=false):null;} else if(gh!=null&&gh.$==6){ const gk=gh.$0;u0036((gn) => { db(false, gn);}, gk.Holes);u0036((gn) => { ed(gn[0], gn[1]);}, gk.Attrs);return dh(gk);} else { const gl=gh.$1;const gm=gh.$0;dg(gm);gh=gl;} } }
function dh(gh){ const gi=gc(gh.Render);if(gi!=null&&gi.$==1){ gi.$0(gh.El);ga(gh, "Render", null);} }
function di(gh){ const gi=gh.El;function gj(gn, go){ while(true){ if(gn!=null&&gn.$==1)return gn.$0.El;else if(gn!=null&&gn.$==2){ const gp=gn.$0;if(gp.Dirty){ gp.Dirty=false;return c0(gi, gp.Current, go);} else gn=gp.Current;} else if(gn==null)return go;else if(gn!=null&&gn.$==4)return gn.$0.Text;else if(gn!=null&&gn.$==5)return gn.$0;else if(gn!=null&&gn.$==6){ const gq=gn.$0;if(gq.Dirty)gq.Dirty=false;return u0037((gt, gu) => gt==null||gt.constructor===Object?gj(gt, gu):gt, gq.Els, go);} else { const gr=gn.$1;const gs=gn.$0;gn=gs;go=gj(gr, go);} } } const gk=gh.El;fX((gn) => { dG(gk, gn);}, fW(fY(gh), fV(gh.El, gc(gh.Delimiters))));let gl=gh.Children;const gm=gc(gh.Delimiters);gj(gl, gm!=null&&gm.$==1?gm.$0[1]:null);}
class dj { Attr;Children;Delimiters;El;ElKey;Render;Equals(gh){ return this.ElKey===gh.ElKey;} GetHashCode(){ return this.ElKey;} static New(gh, gi, gj, gk, gl, gm){ const gn={Attr:gh, Children:gi, El:gk, ElKey:gl};let go=(ga(gn, "Delimiters", gj),ga(gn, "Render", gm),gn);return gf(dj, go);} }
class dk extends j { init;SSet(gh){ return u0031(gh);} SAppendMany(gh, gi){ let gj=dX(gh);gi.push.apply(gi, gj);return gi;} SSetAt(gh, gi, gj){ s(gj, gh, gi);return gj;} SAppend(gh, gi){ gi.push(gh);return gi;} SInit(){ return this.init;} constructor(gh){ super();this.init=gh;} }
class dl extends bM { docNode_1;updates_1;elt;rvUpdates;static TreeNode(gh, gi){ const gj=eG.Create(gi);const gk=u0038((gn) => d1(gn[1]), gh.Attrs);let gl=dY(cN(), cU, gk);let gm=cU(gl, gj.v);return new dl(cx(gh), gm, p(gh.Els, 0), gj);} constructor(gh, gi, gj, gk){ super(gh, gi);this.docNode_1=gh;this.updates_1=gi;this.elt=gj;this.rvUpdates=gk;} }
class dm extends Error { static New(){ return new this("New");} static New_1(gh){ return new this("New_1", gh);} constructor(gh, gi){ if(gh=="New"){ gh="New_1";gi="The given key was not present in the dictionary.";} if(gh=="New_1"){ const gj=gi;super(gj);} } }
function dn(gh){ let gi=null;let gj=0;const gk=gh.textContent;const gl=new RegExp(bL(), "g");while(gi=gl.exec(gk),gi!==null){ gh.parentNode.insertBefore(globalThis.document.createTextNode(dv(gk, N(gj), N(gl.lastIndex-p(gi, 0).length-1))), gh);gj=gl.lastIndex;const gm=globalThis.document.createElement("span");gm.setAttribute("ws-replace", p(gi, 1).toLowerCase());gh.parentNode.insertBefore(gm, gh);} gl.lastIndex=0;gh.textContent=dv(gk, N(gj), null);}
function do_1(gh){ console.warn("Instantiating non-loaded template", gh);}
function dp(gh, gi, gj){ const gk=gh.querySelector("[ws-replace]");return w(gk, null)?(console.warn("Filling non-existent text hole", gj),null):(gk.parentNode.replaceChild(globalThis.document.createTextNode(gi), gk),N(gk.getAttribute("ws-replace")));}
function dq(gh, gi){ const gj=(gk) => { bI(gh, "["+gk+"]", (gl) => { if(!gi.Contains(gl.getAttribute(gk)))gl.removeAttribute(gk);});};gj("ws-attr");gj("ws-onafterrender");gj("ws-var");bI(gh, "[ws-hole]", (gk) => { if(!gi.Contains(gk.getAttribute("ws-hole"))){ gk.removeAttribute("ws-hole");while(gk.hasChildNodes())gk.removeChild(gk.lastChild);} });bI(gh, "[ws-replace]", (gk) => { if(!gi.Contains(gk.getAttribute("ws-replace")))gk.parentNode.removeChild(gk);});bI(gh, "[ws-on]", (gk) => { gk.setAttribute("ws-on", ey(" ", u0032((gl) => gi.Contains(p(ez(gl, [":"], 1), 1)), ez(gk.getAttribute("ws-on"), [" "], 1))));});bI(gh, "[ws-attr-holes]", (gk) => { const gl=ez(gk.getAttribute("ws-attr-holes"), [" "], 1);for(let gp=0, gq=gl.length-1;gp<=gq;gp++){ const gm=p(gl, gp);let gn=new RegExp(bL(), "g");let go=gk.getAttribute(gm).replace(gn, (gr, gs) => gi.Contains(gs)?gr:"");gk.setAttribute(gm, go);} });}
function dr(gh, gi){ du(gi);const gj=gi.nodeName.toLowerCase();const gk=gh.querySelector("[ws-attr="+gj+"]");if(w(gk, null))console.warn("Filling non-existent attr hole", gj);else { gk.removeAttribute("ws-attr");for(let gm=0, gn=gi.attributes.length-1;gm<=gn;gm++){ const gl=gi.attributes.item(gm);if(gl.name=="class"&&gk.hasAttribute("class"))gk.setAttribute("class", gk.getAttribute("class")+" "+gl.nodeValue);else gk.setAttribute(gl.name, gl.nodeValue);} } }
function ds(gh, gi){ const gj=(gk) => { bI(gh, "["+gk+"]", (gl) => { let gm;const gn=(gm=null,[gi.TryGetValue(gl.getAttribute(gk).toLowerCase(), {get:() => gm, set:(go) => { gm=go;}}), gm]);if(gn[0])gl.setAttribute(gk, gn[1]);});};gj("ws-hole");gj("ws-replace");gj("ws-attr");gj("ws-onafterrender");gj("ws-var");bI(gh, "[ws-on]", (gk) => { gk.setAttribute("ws-on", ey(" ", u0038((gl) => { let gm;const gn=ez(gl, [":"], 1);const go=(gm=null,[gi.TryGetValue(p(gn, 1), {get:() => gm, set:(gp) => { gm=gp;}}), gm]);return go[0]?p(gn, 0)+":"+go[1]:gl;}, ez(gk.getAttribute("ws-on"), [" "], 1))));});bI(gh, "[ws-attr-holes]", (gk) => { const gl=ez(gk.getAttribute("ws-attr-holes"), [" "], 1);for(let gm=0, gn=gl.length-1;gm<=gn;gm++)((() => { const go=p(gl, gm);return gk.setAttribute(go, bc((gp, gq) => { const gr=m(gq);return gp.replace(new RegExp("\\${"+gr[0]+"}", "ig"), "${"+gr[1]+"}");}, gk.getAttribute(go), gi));})());});}
function dt(gh, gi, gj){ while(true){ if(gh.hasChildNodes())gj=gi.insertBefore(gh.lastChild, gj);else return null;} }
function du(gh){ const gi=gh.attributes;const gj=[];const gk=[];const gl=[];for(let gq=0, gr=gi.length-1;gq<=gr;gq++){ const gm=gi.item(gq);if(eA(gm.nodeName, "ws-on")&&gm.nodeName!="ws-onafterrender"&&gm.nodeName!="ws-on"){ gj.push(gm.nodeName);gk.push(dv(gm.nodeName, N("ws-on".length), null)+":"+gm.nodeValue.toLowerCase());} else if(!eA(gm.nodeName, "ws-")&&(new RegExp(bL())).test(gm.nodeValue)){ let gn=new RegExp(bL(), "g");let go=gm.nodeValue.replace(gn, (gs, gt) =>"${"+gt.toLowerCase()+"}");gm.nodeValue=go;gl.push(gm.nodeName);} else void 0;} if(!(gk.length==0))gh.setAttribute("ws-on", ey(" ", gk));if(!(gl.length==0))gh.setAttribute("ws-attr-holes", ey(" ", gl));const gp=(gs) => { const gt=gh.getAttribute(gs);if(gt==null){ } else gh.setAttribute(gs, gt.toLowerCase());};gp("ws-hole");gp("ws-replace");gp("ws-attr");gp("ws-onafterrender");gp("ws-var");u0036((gs) => { gh.removeAttribute(gs);}, gj);}
function dv(gh, gi, gj){ if(gi==null){ if(gj!=null&&gj.$==1){ const gk=gj.$0;return gk<0?"":gh.slice(0, gk+1);} else return"";} else if(gj==null)return gh.slice(gi.$0);else { const gl=gj.$0;return gl<0?"":gh.slice(gi.$0, gl+1);} }
function dw(gh){ const gi=globalThis.document.createElement("div");if(!dy().test(gh)){ gi.appendChild(globalThis.document.createTextNode(gh));return gi;} else { const gj=dC().exec(gh);const gk=w(gj, null)?"":p(gj, 1).toLowerCase();const gl=(dz())[gk];const gm=gl?gl:dA();gi.innerHTML=gm[1]+gh.replace(dB(), "<$1></$2>")+gm[2];function gn(go, gp){ while(true){ if(gp===0)return go;else { const gq=gp;go=go.lastChild;gp=gq-1;} } } return gn(gi, gm[0]);} }
function dx(gh){ const gi=[];for(let gj=0, gk=gh.childNodes.length-1;gj<=gk;gj++)gi.push(gh.childNodes[gj]);return gi;}
function dy(){ return e$.rhtml;}
function dz(){ return e$.wrapMap;}
function dA(){ return e$.defaultWrap;}
function dB(){ return e$.rxhtmlTag;}
function dC(){ return e$.rtagName;}
function dD(gh, gi, gj){ const gk=gh.querySelectorAll(gi);for(let gl=0, gm=gk.length-1;gl<=gm;gl++)gj(gk[gl]);}
function dE(gh, gi){ const gj=globalThis.document.querySelectorAll(gh);for(let gk=0, gl=gj.length-1;gk<=gl;gk++)gi(gj[gk]);}
function dF(gh, gi, gj){ let gk;if(gj.parentNode===gh){ const gl=gj.nextSibling;let gm=w(gl, null)?null:gl;gk=gi===gm;} else gk=false;if(!gk)gh.insertBefore(gj, gi);}
function dG(gh, gi){ if(gi.parentNode===gh)gh.removeChild(gi);}
function dH(){ return l("The input sequence has an insufficient number of elements.");}
function dI(gh, gi){ let gj=true;let gk=0;while(gj&&gk<r(gi))if(w(gi[gk], gh))gj=false;else gk=gk+1;return!gj;}
function dJ(){ return l("The input must be non-negative.");}
class dK extends j { d;GetEnumerator(){ return ct(bh((gh) => gh.K, this.d));} constructor(gh){ super();this.d=gh;} }
function dL(){ return e1();}
function dM(gh){ const gi=null;return eQ(() => eR(dO(() => { }, e2(gh)), () => { e3(gh);return eU(null);}));}
function dN(gh, gi){ return dP(fb(gh.$0, gi.$0));}
function dO(gh, gi){ const gj=gi.Duration;if(gj===0)return eS();else { const gk=(gl) => { function gm(gn){ return(go) => { const gp=go-gn;gi.Compute(gp);gh();return gp<=gj?void requestAnimationFrame((gq) => {(gm(gn))(gq);}):gl();};} requestAnimationFrame((gn) => {(gm(gn))(gn);});};return eZ((gl, gm, gn) => gk.apply(null, [gl, gm, gn]));} }
function dP(gh){ return{$:0, $0:gh};}
function dQ(gh){ return dP(fd(bh(e5, gh)));}
function dR(){ return dP(fe());}
function dS(){ return e9.BatchUpdatesEnabled;}
function dT(gh){ const gi=[0];function gj(){ const gk=null;return eQ(() => eR(gh, () => { const gl=gi[0];return w(gl, 1)?(gi[0]=0,eS()):w(gl, 2)?(gi[0]=1,gj()):eS();}));} return() => { const gk=gi[0];if(w(gk, 0)){ gi[0]=1;eT(gj(), null);} else w(gk, 1)?gi[0]=2:void 0;};}
function dU(gh, gi, gj, gk){ const gl={DynElem:gh, DynFlags:gi, DynNodes:gj};ga(gl, "OnAfterRender", gk);return gl;}
let dV=gb((gh) => class gi { static { dV=gh(this);} static counter;static { this.counter=0;} });
function dW(gh, gi){ for(let gj=0, gk=gi.length-1;gj<=gk;gj++)gi[gj]=gh(gi[gj]);return gi;}
function dX(gh){ if(gh instanceof Array)return gh;else if(gh instanceof cD)return u0035(gh);else if(gh===null)return[];else { const gi=[];const gj=ct(gh);try { while(gj.MoveNext())gi.push(gj.Current);return gi;} finally { if(typeof gj=="object"&&a(gj))gj.Dispose();} } }
function dY(gh, gi, gj){ const gk=r(gj);function gl(gm){ return(gn) => { let go;switch(gn<=0?0:gn===1?gm>=0&&gm<gk?1:(go=gn,2):(go=gn,2)){ case 0:return gh;case 1:return p(gj, gm);case 2:const gp=gn/2>>0;return gi((gl(gm))(gp), (gl(gm+gp))(gn-gp));} };} return(gl(0))(gk);}
function dZ(gh, gi, gj, gk){ const gl=r(gk);function gm(gn){ return(go) => { let gp;switch(go<=0?0:go===1?gn>=0&&gn<gl?1:(gp=go,2):(gp=go,2)){ case 0:return gi;case 1:return gh(p(gk, gn));case 2:const gq=go/2>>0;return gj((gm(gn))(gq), (gm(gn+gq))(go-gq));} };} return(gm(0))(gl);}
function d0(gh, gi){ const gj=[];const gk=[];function gl(go){ while(true){ if(!(go===null)){ if(go!=null&&go.$==1)return gj.push(go.$0);else if(go!=null&&go.$==2){ const gp=go.$1;const gq=go.$0;gl(gq);go=gp;} else return go!=null&&go.$==3?go.$0(gh):go!=null&&go.$==4?gk.push(go.$0):null;} else return null;} } gl(gi);const gm=gj.slice(0);let gn=dU(gh, d3(gi), gm, gk.length===0?null:N((go) => { be((gp) => { gp(go);}, gk);}));return gn;}
function d1(gh){ return dZ((gi) => gi.NChanged, cN(), cU, gh.DynNodes);}
function d2(gh){ return dU(gh, 0, [], null);}
function d3(gh){ return gh!==null&&gh.hasOwnProperty("flags")?gh.flags:0;}
function d4(gh){ return et.A3(gh);}
function d5(gh, gi){ return et.A1(new ff(gh, gi));}
function d6(){ return fg.EmptyAttr;}
function d7(gh){ const gi=2;return(gh.DynFlags&gi)===gi;}
function d8(gh){ return ec(gh, (gi, gj) => gi.NGetExitAnim(gj));}
function d9(gh){ const gi=1;return(gh.DynFlags&gi)===gi;}
function d_(gh){ return ec(gh, (gi, gj) => gi.NGetEnterAnim(gj));}
function d$(gh){ const gi=4;return(gh.DynFlags&gi)===gi;}
function ea(gh){ return ec(gh, (gi, gj) => gi.NGetChangeAnim(gj));}
function eb(gh, gi){ if(gh===null)return gi;else if(gi===null)return gh;else { const gj=et.A2(gh, gi);ee(gj, d3(gh)|d3(gi));return gj;} }
function ec(gh, gi){ return dQ(u0038((gj) => gi(gj, gh.DynElem), gh.DynNodes));}
function ed(gh, gi){ u0036((gj) => { gj.NSync(gh);}, gi.DynNodes);}
function ee(gh, gi){ gh.flags=gi;}
class ef extends u { name;fillWith;get Value(){ return this.fillWith;} get ValueObj(){ return this.Value;} get Name(){ return this.name;} }
class eg extends u { name;fillWith;get Value(){ return this.fillWith;} get ValueObj(){ return this.Value;} get Name(){ return this.name;} }
function eh(gh, gi){ return d4((gj) => { gj.addEventListener(gh, (gk) =>(gi(gj))(gk), false);});}
function ei(gh){ return et.A4(gh);}
function ej(gh, gi){ return d5(gi, (gj) =>(gk) => gj.setAttribute(gh, gk));}
function ek(gh){ return er(fL(), gh);}
function el(gh){ return er(fM(), gh);}
function em(gh){ return er(fN(), gh);}
function en(gh){ return er(fO(), gh);}
function eo(gh){ return er(fP(), gh);}
function ep(gh){ return er(fQ(), gh);}
function eq(gh){ return er(fR(), gh);}
function er(gh, gi){ const gj=gh(gi);return et.Append(d4(gj[0]), es(gj[1], gj[2]));}
function es(gh, gi){ return d5(gi, gh);}
class et { static Handler(gh, gi){ return et.HandlerImpl(gh, gi);} static Concat(gh){ const gi=dX(gh);return dY(d6(), et.Append, gi);} static Create(gh, gi){ return d4((gj) => { gj.setAttribute(gh, gi);});} static HandlerImpl(gh, gi){ return d4((gj) => { gj.addEventListener(gh, (gk) =>(gi(gj))(gk), false);});} static Append(gh, gi){ return eb(gh, gi);} static A4(gh){ return gf(et, {$:4, $0:gh});} static A3(gh){ return gf(et, {$:3, $0:gh});} static A1(gh){ return gf(et, {$:1, $0:gh});} static A2(gh, gi){ return gf(et, {$:2, $0:gh, $1:gi});} }
class eu extends u { name;fillWith;get Value(){ return this.fillWith;} get ValueObj(){ return this.Value;} get Name(){ return this.name;} }
class ev extends u { name;fillWith;get Value(){ return this.fillWith;} get ValueObj(){ return this.Value;} get Name(){ return this.name;} }
function ew(gh){ return{$:0, $0:gh};}
function ex(gh){ return{$:1, $0:gh};}
function ey(gh, gi){ return u0031(gi).join(gh);}
function ez(gh, gi, gj){ return eB(gh, new RegExp("["+eC(gi.join(""))+"]"), gj);}
function eA(gh, gi){ return gh.substring(0, gi.length)==gi;}
function eB(gh, gi, gj){ return gj===1?u0032((gk) => gk!=="", eD(gh, gi)):eD(gh, gi);}
function eC(gh){ return gh.replace(new RegExp("[-\\/\\\\^$*+?.()|[\\]{}]", "g"), "\\$&");}
function eD(gh, gi){ return gh.split(gi);}
function eE(gh, gi){ return bq(gh, eF(gi));}
function eF(gh){ return gh==null?"":gh;}
class eG { c;s;v;static Create(gh){ let gi;gi=null;gi=eG.New(gh, null, () => { let gj;gj=gi.s;return gj===null?(gj=b4(gi.c()),gi.s=gj,bX(gj, () => { gi.s=null;}),gj):gj;});return gi;} static New(gh, gi, gj){ return gf(eG, {c:gh, s:gi, v:gj});} }
class eH extends j { d;GetEnumerator(){ return ct(bh((gh) => gh.V, this.d));} constructor(gh){ super();this.d=gh;} }
function eI(gh, gi){ return{PreviousNodes:gh, Top:gi};}
function eJ(){ return eL(new cj("New_3"));}
function eK(gh){ const gi=[];function gj(gm, gn){ while(true)switch(gm){ case 0:if(gn!=null&&gn.$==0){ const go=gn.$1;const gp=gn.$0;gj(0, gp);gn=go;} else if(gn!=null&&gn.$==1){ const gq=gn.$0;gn=gq;gm=1;} else if(gn!=null&&gn.$==2){ const gr=gn.$0;gn=gr.Current;} else if(gn!=null&&gn.$==6){ const gs=gn.$0.Holes;return(((gt) =>(gu) => { u0036(gt, gu);})(gl))(gs);} else return null;break;case 1:gi.push(gn);gn=gn.Children;gm=0;break;} } function gk(gm){ return gj(0, gm);} function gl(gm){ return gj(1, gm);} gk(gh);return eL(new cj("New_2", gi));}
function eL(gh){ return{$:0, $0:gh};}
function eM(gh, gi){ return eL(fp(gh, gi.$0));}
function eN(gh, gi){ return eL(fq(gh.$0, gi.$0));}
function eO(gh){ return fr(gh.$0);}
function eP(gh, gi){ return eL(fs(gh.$0, gi.$0));}
function eQ(gh){ return(gi) => { try {(gh())(gi);} catch(gj){ gi.k(fk(gj));} };}
function eR(gh, gi){ return eW((gj) => { gh(fj((gk) => { if(gk.$==0){ const gl=gk.$0;eV().Fork(() => { try {(gi(gl))(gj);} catch(gm){ gj.k(fk(gm));} });} else eV().Fork(() => { gj.k(gk);});}, gj.ct));});}
function eS(){ return fn.Zero;}
function eT(gh, gi){ const gj=(eX())[0];const gk=gi==null?gj:gi.$0;eV().Fork(() => { if(!gk.c)gh(fj((gl) => { if(gl.$==1)eY(gl.$0);}, gk));});}
function eU(gh){ return(gi) => { gi.k(fl(gh));};}
function eV(){ return fn.scheduler;}
function eW(gh){ return(gi) => { if(gi.ct.c)e0(gi);else gh(gi);};}
function eX(){ return fn.defCTS;}
function eY(gh){ console.log("WebSharper: Uncaught asynchronous exception", gh);}
function eZ(gh){ return(gi) => { const gj=[false];const gk=(gl) => { if(gj[0])l("A continuation provided by Async.FromContinuations was invoked multiple times");else { gj[0]=true;eV().Fork(gl);} };gh((gl) => { gk(() => { gi.k(fl(gl));});}, (gl) => { gk(() => { gi.k(fk(gl));});}, (gl) => { gk(() => { gi.k(fm(gl));});});};}
function e0(gh){ gh.k(fm(new f4("New", gh.ct)));}
function e1(){ return fa.UseAnimations;}
function e2(gh){ return e4(Y((gi) => gi.$==1?N(gi.$0):null, fc(gh.$0)));}
function e3(gh){ u0036((gi) => { if(gi.$==0)gi.$0();}, fc(gh.$0));}
function e4(gh){ const gi=dX(gh);const gj=r(gi);if(gj===0)return e6();else if(gj===1)return p(gi, 0);else { const gk=bk(bh((gm) => gm.Duration, gi));const gl=u0038((gm) => e8(gk, gm), gi);return e7(gk, (gm) => { u0036((gn) => { gn.Compute(gm);}, gl);});} }
function e5(gh){ return gh.$0;}
function e6(gh){ return e7(0, () => gh);}
function e7(gh, gi){ return{Compute:gi, Duration:gh};}
function e8(gh, gi){ const gj=gi.Compute;const gk=gi.Duration;const gl=f5(() => gi.Compute(gi.Duration));return{Compute:(gm) => gm>=gk?gl.f():gj(gm), Duration:gh};}
let e9=gb((gh) => class gi { static { e9=gh(this);} static BatchUpdatesEnabled;static { this.BatchUpdatesEnabled=true;} });
function e_(gh){ let gi=[];let gj;for(var gk in gh)gi.push.apply(gi, gh[gk]);return gi;}
let e$=gb((gh) => class gi { static { e$=gh(this);} static defaultWrap;static wrapMap;static rhtml;static rtagName;static rxhtmlTag;static { this.rxhtmlTag=new RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>", "gi");this.rtagName=new RegExp("<([\\w:]+)");this.rhtml=new RegExp("<|&#?\\w+;");const gj=[1, "<table>", "</table>"];let gk=Object.fromEntries([["option", [1, "<select multiple='multiple'>", "</select>"]], ["legend", [1, "<fieldset>", "</fieldset>"]], ["area", [1, "<map>", "</map>"]], ["param", [1, "<object>", "</object>"]], ["thead", gj], ["tbody", gj], ["tfoot", gj], ["tr", [2, "<table><tbody>", "</tbody></table>"]], ["col", [2, "<table><colgroup>", "</colgoup></table>"]], ["td", [3, "<table><tbody><tr>", "</tr></tbody></table>"]]]);this.wrapMap=gk;this.defaultWrap=[0, "", ""];} });
let fa=gb((gh) => class gi { static { fa=gh(this);} static UseAnimations;static CubicInOut;static { this.CubicInOut=fi.Custom((gj) => { const gk=gj*gj;return 3*gk-2*(gk*gj);});this.UseAnimations=true;} });
function fb(gh, gi){ return gh.$==0?gi:gi.$==0?gh:{$:2, $0:gh, $1:gi};}
function fc(gh){ const gi=[];function gj(gk){ while(true){ if(gk.$==1)return gi.push(gk.$0);else if(gk.$==2){ const gl=gk.$1;const gm=gk.$0;gj(gm);gk=gl;} else return gk.$==3?u0036((gn) => { gi.push(gn);}, gk.$0):null;} } gj(gh);return gi.slice(0);}
function fd(gh){ const gi=dX(gh);return dY(fe(), fb, gi);}
function fe(){ return f8.Empty;}
class ff extends j { push;value;dirty;updates;get NChanged(){ return this.updates;} NGetExitAnim(gh){ return dR();} NGetEnterAnim(gh){ return dR();} NGetChangeAnim(gh){ return dR();} NSync(gh){ if(this.dirty){(this.push(gh))(this.value);this.dirty=false;} } constructor(gh, gi){ super();this.push=gi;this.value=void 0;this.dirty=false;this.updates=cM((gj) => { this.value=gj;this.dirty=true;}, gh);} }
let fg=gb((gh) => class gi { static { fg=gh(this);} static FloatApplyChecked;static FloatGetChecked;static FloatSetChecked;static FloatApplyUnchecked;static FloatGetUnchecked;static FloatSetUnchecked;static IntApplyChecked;static IntGetChecked;static IntSetChecked;static IntApplyUnchecked;static IntGetUnchecked;static IntSetUnchecked;static FileApplyUnchecked;static FileGetUnchecked;static FileSetUnchecked;static DateTimeApplyUnchecked;static DateTimeGetUnchecked;static DateTimeSetUnchecked;static StringListApply;static StringListGet;static StringListSet;static StringApply;static StringGet;static StringSet;static BoolCheckedApply;static EmptyAttr;static { this.EmptyAttr=null;this.BoolCheckedApply=(gz) =>[(gA) => { gA.addEventListener("change", () => gz.Get()!=gA.checked?gz.Set(gA.checked):null);}, (gA) =>(gB) => gB!=null&&gB.$==1?void(gA.checked=gB.$0):null, cM(N, gz.View)];this.StringSet=(gz) =>(gA) => { gz.value=gA;};this.StringGet=(gz) => N(gz.value);const gj=fv();const gk=fu();this.StringApply=(gz) => ft(gj, gk, gz);this.StringListSet=(gz) =>(gA) => { const gB=gz.options;for(let gC=0, gD=gB.length-1;gC<=gD;gC++)((() => { const gE=gB.item(gC);gE.selected=dI(gE.value, gA);})());};this.StringListGet=(gz) => { const gA=gz.selectedOptions;return N(u0031(bi(() => bj((gB) =>[gA.item(gB).value], n(0, gA.length-1)))));};const gl=fx();const gm=fw();this.StringListApply=(gz) => ft(gl, gm, gz);this.DateTimeSetUnchecked=(gz) =>(gA) => { gz.value=(new Date(gA)).toLocaleString();};this.DateTimeGetUnchecked=(gz) => { let gA;let gB;const gC=gz.value;if(fS(gC))return N(-8640000000000000);else { gA=0;const gD=f2(gC);let gE=gD!=null&&gD.$==1&&(gA=gD.$0,true);gB=[gE, gA];return gB[0]?N(gB[1]):null;} };const gn=fz();const go=fy();this.DateTimeApplyUnchecked=(gz) => ft(gn, go, gz);this.FileSetUnchecked=() =>() => null;this.FileGetUnchecked=(gz) => { const gA=gz.files;return N(u0031(bi(() => bh((gB) => gA.item(gB), n(0, gA.length-1)))));};const gp=fC();const gq=fB();this.FileApplyUnchecked=(gz) => fA(gp, gq, gz);this.IntSetUnchecked=(gz) =>(gA) => { gz.value=String(gA);};this.IntGetUnchecked=(gz) => { const gA=gz.value;if(fS(gA))return N(0);else { const gB=+gA;return gB!==gB>>0?null:N(gB);} };const gr=fE();const gs=fD();this.IntApplyUnchecked=(gz) => ft(gr, gs, gz);this.IntSetChecked=(gz) =>(gA) => { const gB=gA.Input;return gz.value!=gB?void(gz.value=gB):null;};this.IntGetChecked=(gz) => { let gA;let gB;const gC=gz.value;if(fS(gC))gA=(gz.checkValidity?gz.checkValidity():true)?fT.Blank(gC):fT.Invalid(gC);else { const gD=(gB=0,[bN(gC, {get:() => gB, set:(gE) => { gB=gE;}}), gB]);gA=gD[0]?fT.Valid(gD[1], gC):fT.Invalid(gC);} return N(gA);};const gt=fG();const gu=fF();this.IntApplyChecked=(gz) => ft(gt, gu, gz);this.FloatSetUnchecked=(gz) =>(gA) => { gz.value=String(gA);};this.FloatGetUnchecked=(gz) => { const gA=gz.value;if(fS(gA))return N(0);else { const gB=+gA;return isNaN(gB)?null:N(gB);} };const gv=fI();const gw=fH();this.FloatApplyUnchecked=(gz) => ft(gv, gw, gz);this.FloatSetChecked=(gz) =>(gA) => { const gB=gA.Input;return gz.value!=gB?void(gz.value=gB):null;};this.FloatGetChecked=(gz) => { let gA;const gB=gz.value;if(fS(gB))gA=(gz.checkValidity?gz.checkValidity():true)?fT.Blank(gB):fT.Invalid(gB);else { const gC=+gB;gA=isNaN(gC)?fT.Invalid(gB):fT.Valid(gC, gB);} return N(gA);};const gx=fK();const gy=fJ();this.FloatApplyChecked=(gz) => ft(gx, gy, gz);} });
class fh extends j { idle;robin;Fork(gh){ this.robin.push(gh);this.idle?(this.idle=false,setTimeout(() => { this.tick();}, 0)):void 0;} tick(){ const gh=Date.now();let gi=true;while(gi)if(this.robin.length===0){ this.idle=true;gi=false;} else {(this.robin.shift())();Date.now()-gh>40?(setTimeout(() => { this.tick();}, 0),gi=false):void 0;} } constructor(){ super();this.idle=true;this.robin=[];} }
class fi extends j { transformTime;static Custom(gh){ return new fi(gh);} constructor(gh){ super();this.transformTime=gh;} }
function fj(gh, gi){ return{k:gh, ct:gi};}
function fk(gh){ return{$:1, $0:gh};}
function fl(gh){ return{$:0, $0:gh};}
function fm(gh){ return{$:2, $0:gh};}
let fn=gb((gh) => class gi { static { fn=gh(this);} static GetCT;static Zero;static defCTS;static scheduler;static noneCT;static { this.noneCT=fo(false, []);this.scheduler=new fh();this.defCTS=[new fU()];this.Zero=eU();this.GetCT=(gj) => { gj.k(fl(gj.ct));};} });
function fo(gh, gi){ return{c:gh, r:gi};}
function fp(gh, gi){ return new cj("New_2", u0032(gh, fr(gi)));}
function fq(gh, gi){ const gj=new cj("New_2", fr(gi));gj.ExceptWith(fr(gh));return gj;}
function fr(gh){ const gi=$(gh.Count, void 0);gh.CopyTo(gi, 0);return gi;}
function fs(gh, gi){ const gj=new cj("New_2", fr(gh));gj.IntersectWith(fr(gi));return gj;}
function ft(gh, gi, gj){ let gk;gk=null;return[(gl) => { const gm=() => { gj.UpdateMaybe((gn) => { let go;gk=gh(gl);return gk!=null&&gk.$==1&&(!w(gk.$0, gn)&&(go=[gk, gk.$0],true))?go[0]:null;});};gl.addEventListener("change", gm);gl.addEventListener("input", gm);gl.addEventListener("keypress", gm);}, (gl) => { const gm=gi(gl);return(gn) => gn==null?null:gm(gn.$0);}, cM((gl) => { let gm;return gk!=null&&gk.$==1&&(w(gk.$0, gl)&&(gm=gk.$0,true))?null:N(gl);}, gj.View)];}
function fu(){ return fg.StringSet;}
function fv(){ return fg.StringGet;}
function fw(){ return fg.StringListSet;}
function fx(){ return fg.StringListGet;}
function fy(){ return fg.DateTimeSetUnchecked;}
function fz(){ return fg.DateTimeGetUnchecked;}
function fA(gh, gi, gj){ let gk;gk=null;return[(gl) => { gl.addEventListener("change", () => { gj.UpdateMaybe((gm) => { let gn;gk=gh(gl);return gk!=null&&gk.$==1&&(gk.$0!==gm&&(gn=[gk, gk.$0],true))?gn[0]:null;});});}, (gl) => { const gm=gi(gl);return(gn) => gn==null?null:gm(gn.$0);}, cM((gl) => { let gm;return gk!=null&&gk.$==1&&(w(gk.$0, gl)&&(gm=gk.$0,true))?null:N(gl);}, gj.View)];}
function fB(){ return fg.FileSetUnchecked;}
function fC(){ return fg.FileGetUnchecked;}
function fD(){ return fg.IntSetUnchecked;}
function fE(){ return fg.IntGetUnchecked;}
function fF(){ return fg.IntSetChecked;}
function fG(){ return fg.IntGetChecked;}
function fH(){ return fg.FloatSetUnchecked;}
function fI(){ return fg.FloatGetUnchecked;}
function fJ(){ return fg.FloatSetChecked;}
function fK(){ return fg.FloatGetChecked;}
function fL(){ return fg.IntApplyUnchecked;}
function fM(){ return fg.StringApply;}
function fN(){ return fg.FloatApplyUnchecked;}
function fO(){ return fg.BoolCheckedApply;}
function fP(){ return fg.DateTimeApplyUnchecked;}
function fQ(){ return fg.FileApplyUnchecked;}
function fR(){ return fg.StringListApply;}
function fS(gh){ return eE(f1, gh);}
class fT { get Input(){ return this.$==1?this.$0:this.$==2?this.$0:this.$1;} static Blank(gh){ return gf(fT, {$:2, $0:gh});} static Invalid(gh){ return gf(fT, {$:1, $0:gh});} static Valid(gh, gi){ return gf(fT, {$:0, $0:gh, $1:gi});} }
class fU extends j { init;c;pending;r;constructor(){ super();this.c=false;this.pending=null;this.r=[];this.init=1;} }
function fV(gh, gi){ let gj;if(gi!=null&&gi.$==1){ const gk=[];gj=gi.$0[0].nextSibling;while(gj!==gi.$0[1]){ gk.push(gj);gj=gj.nextSibling;} return fZ(gk);} else { let gl=gh.childNodes.length;const gm=gh.childNodes;let gn=ba(gl, (go) => gm[go]);return fZ(gn);} }
function fW(gh, gi){ const gj=gh.$0;return fZ(u0032((gk) => u0039((gl) =>!(gk===gl), gj), gi.$0));}
function fX(gh, gi){ u0036(gh, gi.$0);}
function fY(gh){ const gi=[];function gj(gk){ while(true){ if(gk!=null&&gk.$==2){ const gl=gk.$0;gk=gl.Current;} else if(gk!=null&&gk.$==1)return gi.push(gk.$0.El);else if(gk==null)return null;else if(gk!=null&&gk.$==5)return gi.push(gk.$0);else if(gk!=null&&gk.$==4)return gi.push(gk.$0.Text);else if(gk!=null&&gk.$==6){ const gm=gk.$0.Els;return(((gp) =>(gq) => { u0036(gp, gq);})((gp) => { if(gp==null||gp.constructor===Object)gj(gp);else gi.push(gp);}))(gm);} else { const gn=gk.$1;const go=gk.$0;gj(go);gk=gn;} } } gj(gh.Children);return fZ(dX(gi));}
function fZ(gh){ return{$:0, $0:gh};}
function f0(gh){ gh.splice(0, r(gh));}
function f1(gh){ return gh.match(new RegExp("\\s"))!==null;}
function f2(gh){ const gi=Date.parse(gh);return isNaN(gi)?null:N(gi);}
function f3(gh, gi, gj, gk){ const gl=+gh;const gm=gl===gl-gl%1&&gl>=gi&&gl<=gj;if(gm)gk.set(gl);return gm;}
class f4 extends Error { ct;static New(gh){ return new this("New", gh);} static New_1(gh, gi, gj){ return new this("New_1", gh, gi, gj);} constructor(gh, gi, gj, gk){ let gl;if(gh=="New"){ gl=gi;gh="New_1";gi="The operation was canceled.";gj=null;gk=gl;} if(gh=="New_1"){ const gm=gi;const gn=gj;const go=gk;super(gm);this.inner=gn;this.ct=go;} } }
function f5(gh){ return f9(false, gh, f6);}
function f6(){ const gh=this.v();this.c=true;this.v=gh;this.f=f7;return gh;}
function f7(){ return this.v;}
let f8=gb((gh) => class gi { static { f8=gh(this);} static Empty;static { this.Empty={$:0};} });
function f9(gh, gi, gj){ return{c:gh, v:gi, f:gj};}
gg(() => { b();});
f_();

